(()=>{"use strict";var t={d:(e,i)=>{for(var n in i)t.o(i,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:i[n]})}};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),t.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var e={};t.r(e),t.d(e,{VERSION:()=>i,after:()=>Ae,all:()=>Ke,allKeys:()=>dt,any:()=>$e,assign:()=>At,before:()=>je,bind:()=>Me,bindAll:()=>be,chain:()=>ge,chunk:()=>Ti,clone:()=>Lt,collect:()=>Ye,compact:()=>Ei,compose:()=>Ie,constant:()=>H,contains:()=>ti,countBy:()=>fi,create:()=>Tt,debounce:()=>Oe,default:()=>ki,defaults:()=>jt,defer:()=>Se,delay:()=>Ce,detect:()=>ze,difference:()=>Si,drop:()=>wi,each:()=>Xe,escape:()=>re,every:()=>Ke,extend:()=>It,extendOwn:()=>At,filter:()=>He,find:()=>ze,findIndex:()=>Ge,findKey:()=>Te,findLastIndex:()=>ke,findWhere:()=>We,first:()=>xi,flatten:()=>Ci,foldl:()=>Ve,foldr:()=>Ze,forEach:()=>Xe,functions:()=>Rt,get:()=>Bt,groupBy:()=>li,has:()=>Ut,head:()=>xi,identity:()=>zt,include:()=>ti,includes:()=>ti,indexBy:()=>ci,indexOf:()=>Be,initial:()=>Mi,inject:()=>Ve,intersection:()=>Ni,invert:()=>Ot,invoke:()=>ei,isArguments:()=>Q,isArray:()=>W,isArrayBuffer:()=>T,isBoolean:()=>S,isDataView:()=>z,isDate:()=>I,isElement:()=>P,isEmpty:()=>ot,isEqual:()=>pt,isError:()=>j,isFinite:()=>V,isFunction:()=>k,isMap:()=>wt,isMatch:()=>at,isNaN:()=>Z,isNull:()=>E,isNumber:()=>N,isObject:()=>b,isRegExp:()=>A,isSet:()=>Et,isString:()=>R,isSymbol:()=>F,isTypedArray:()=>it,isUndefined:()=>C,isWeakMap:()=>bt,isWeakSet:()=>Ct,iteratee:()=>Vt,keys:()=>st,last:()=>bi,lastIndexOf:()=>Ue,map:()=>Ye,mapObject:()=>Ht,matcher:()=>Wt,matches:()=>Wt,max:()=>ri,memoize:()=>Ee,methods:()=>Rt,min:()=>si,mixin:()=>Gi,negate:()=>Ne,noop:()=>Jt,now:()=>ee,object:()=>ji,omit:()=>_i,once:()=>Fe,pairs:()=>Pt,partial:()=>_e,partition:()=>pi,pick:()=>mi,pluck:()=>ii,property:()=>Xt,propertyOf:()=>Kt,random:()=>te,range:()=>Fi,reduce:()=>Ve,reduceRight:()=>Ze,reject:()=>Je,rest:()=>wi,restArguments:()=>w,result:()=>pe,sample:()=>oi,select:()=>He,shuffle:()=>ai,size:()=>gi,some:()=>$e,sortBy:()=>hi,sortedIndex:()=>qe,tail:()=>wi,take:()=>xi,tap:()=>Gt,template:()=>fe,templateSettings:()=>oe,throttle:()=>Pe,times:()=>$t,toArray:()=>yi,toPath:()=>kt,transpose:()=>Ii,unescape:()=>se,union:()=>Ri,uniq:()=>Oi,unique:()=>Oi,uniqueId:()=>ye,unzip:()=>Ii,values:()=>St,where:()=>ni,without:()=>Pi,wrap:()=>Re,zip:()=>Ai});var i="1.13.1",n="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},r=Array.prototype,s=Object.prototype,o="undefined"!=typeof Symbol?Symbol.prototype:null,a=r.push,h=r.slice,u=s.toString,l=s.hasOwnProperty,c="undefined"!=typeof ArrayBuffer,f="undefined"!=typeof DataView,p=Array.isArray,d=Object.keys,y=Object.create,g=c&&ArrayBuffer.isView,v=isNaN,m=isFinite,_=!{toString:null}.propertyIsEnumerable("toString"),M=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],x=Math.pow(2,53)-1;function w(t,e){return e=null==e?t.length-1:+e,function(){for(var i=Math.max(arguments.length-e,0),n=Array(i),r=0;r<i;r++)n[r]=arguments[r+e];switch(e){case 0:return t.call(this,n);case 1:return t.call(this,arguments[0],n);case 2:return t.call(this,arguments[0],arguments[1],n)}var s=Array(e+1);for(r=0;r<e;r++)s[r]=arguments[r];return s[e]=n,t.apply(this,s)}}function b(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function E(t){return null===t}function C(t){return void 0===t}function S(t){return!0===t||!1===t||"[object Boolean]"===u.call(t)}function P(t){return!(!t||1!==t.nodeType)}function O(t){var e="[object "+t+"]";return function(t){return u.call(t)===e}}const R=O("String"),N=O("Number"),I=O("Date"),A=O("RegExp"),j=O("Error"),F=O("Symbol"),T=O("ArrayBuffer");var L=O("Function"),G=n.document&&n.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof G&&(L=function(t){return"function"==typeof t||!1});const k=L,q=O("Object");var D=f&&q(new DataView(new ArrayBuffer(8))),B="undefined"!=typeof Map&&q(new Map),U=O("DataView");const z=D?function(t){return null!=t&&k(t.getInt8)&&T(t.buffer)}:U,W=p||O("Array");function X(t,e){return null!=t&&l.call(t,e)}var Y=O("Arguments");!function(){Y(arguments)||(Y=function(t){return X(t,"callee")})}();const Q=Y;function V(t){return!F(t)&&m(t)&&!isNaN(parseFloat(t))}function Z(t){return N(t)&&v(t)}function H(t){return function(){return t}}function J(t){return function(e){var i=t(e);return"number"==typeof i&&i>=0&&i<=x}}function K(t){return function(e){return null==e?void 0:e[t]}}const $=K("byteLength"),tt=J($);var et=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const it=c?function(t){return g?g(t)&&!z(t):tt(t)&&et.test(u.call(t))}:H(!1),nt=K("length");function rt(t,e){e=function(t){for(var e={},i=t.length,n=0;n<i;++n)e[t[n]]=!0;return{contains:function(t){return e[t]},push:function(i){return e[i]=!0,t.push(i)}}}(e);var i=M.length,n=t.constructor,r=k(n)&&n.prototype||s,o="constructor";for(X(t,o)&&!e.contains(o)&&e.push(o);i--;)(o=M[i])in t&&t[o]!==r[o]&&!e.contains(o)&&e.push(o)}function st(t){if(!b(t))return[];if(d)return d(t);var e=[];for(var i in t)X(t,i)&&e.push(i);return _&&rt(t,e),e}function ot(t){if(null==t)return!0;var e=nt(t);return"number"==typeof e&&(W(t)||R(t)||Q(t))?0===e:0===nt(st(t))}function at(t,e){var i=st(e),n=i.length;if(null==t)return!n;for(var r=Object(t),s=0;s<n;s++){var o=i[s];if(e[o]!==r[o]||!(o in r))return!1}return!0}function ht(t){return t instanceof ht?t:this instanceof ht?void(this._wrapped=t):new ht(t)}function ut(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,$(t))}ht.VERSION=i,ht.prototype.value=function(){return this._wrapped},ht.prototype.valueOf=ht.prototype.toJSON=ht.prototype.value,ht.prototype.toString=function(){return String(this._wrapped)};var lt="[object DataView]";function ct(t,e,i,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var r=typeof t;return("function"===r||"object"===r||"object"==typeof e)&&ft(t,e,i,n)}function ft(t,e,i,n){t instanceof ht&&(t=t._wrapped),e instanceof ht&&(e=e._wrapped);var r=u.call(t);if(r!==u.call(e))return!1;if(D&&"[object Object]"==r&&z(t)){if(!z(e))return!1;r=lt}switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return o.valueOf.call(t)===o.valueOf.call(e);case"[object ArrayBuffer]":case lt:return ft(ut(t),ut(e),i,n)}var s="[object Array]"===r;if(!s&&it(t)){if($(t)!==$(e))return!1;if(t.buffer===e.buffer&&t.byteOffset===e.byteOffset)return!0;s=!0}if(!s){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,h=e.constructor;if(a!==h&&!(k(a)&&a instanceof a&&k(h)&&h instanceof h)&&"constructor"in t&&"constructor"in e)return!1}n=n||[];for(var l=(i=i||[]).length;l--;)if(i[l]===t)return n[l]===e;if(i.push(t),n.push(e),s){if((l=t.length)!==e.length)return!1;for(;l--;)if(!ct(t[l],e[l],i,n))return!1}else{var c,f=st(t);if(l=f.length,st(e).length!==l)return!1;for(;l--;)if(!X(e,c=f[l])||!ct(t[c],e[c],i,n))return!1}return i.pop(),n.pop(),!0}function pt(t,e){return ct(t,e)}function dt(t){if(!b(t))return[];var e=[];for(var i in t)e.push(i);return _&&rt(t,e),e}function yt(t){var e=nt(t);return function(i){if(null==i)return!1;var n=dt(i);if(nt(n))return!1;for(var r=0;r<e;r++)if(!k(i[t[r]]))return!1;return t!==Mt||!k(i[gt])}}var gt="forEach",vt=["clear","delete"],mt=["get","has","set"],_t=vt.concat(gt,mt),Mt=vt.concat(mt),xt=["add"].concat(vt,gt,"has");const wt=B?yt(_t):O("Map"),bt=B?yt(Mt):O("WeakMap"),Et=B?yt(xt):O("Set"),Ct=O("WeakSet");function St(t){for(var e=st(t),i=e.length,n=Array(i),r=0;r<i;r++)n[r]=t[e[r]];return n}function Pt(t){for(var e=st(t),i=e.length,n=Array(i),r=0;r<i;r++)n[r]=[e[r],t[e[r]]];return n}function Ot(t){for(var e={},i=st(t),n=0,r=i.length;n<r;n++)e[t[i[n]]]=i[n];return e}function Rt(t){var e=[];for(var i in t)k(t[i])&&e.push(i);return e.sort()}function Nt(t,e){return function(i){var n=arguments.length;if(e&&(i=Object(i)),n<2||null==i)return i;for(var r=1;r<n;r++)for(var s=arguments[r],o=t(s),a=o.length,h=0;h<a;h++){var u=o[h];e&&void 0!==i[u]||(i[u]=s[u])}return i}}const It=Nt(dt),At=Nt(st),jt=Nt(dt,!0);function Ft(t){if(!b(t))return{};if(y)return y(t);var e=function(){};e.prototype=t;var i=new e;return e.prototype=null,i}function Tt(t,e){var i=Ft(t);return e&&At(i,e),i}function Lt(t){return b(t)?W(t)?t.slice():It({},t):t}function Gt(t,e){return e(t),t}function kt(t){return W(t)?t:[t]}function qt(t){return ht.toPath(t)}function Dt(t,e){for(var i=e.length,n=0;n<i;n++){if(null==t)return;t=t[e[n]]}return i?t:void 0}function Bt(t,e,i){var n=Dt(t,qt(e));return C(n)?i:n}function Ut(t,e){for(var i=(e=qt(e)).length,n=0;n<i;n++){var r=e[n];if(!X(t,r))return!1;t=t[r]}return!!i}function zt(t){return t}function Wt(t){return t=At({},t),function(e){return at(e,t)}}function Xt(t){return t=qt(t),function(e){return Dt(e,t)}}function Yt(t,e,i){if(void 0===e)return t;switch(null==i?3:i){case 1:return function(i){return t.call(e,i)};case 3:return function(i,n,r){return t.call(e,i,n,r)};case 4:return function(i,n,r,s){return t.call(e,i,n,r,s)}}return function(){return t.apply(e,arguments)}}function Qt(t,e,i){return null==t?zt:k(t)?Yt(t,e,i):b(t)&&!W(t)?Wt(t):Xt(t)}function Vt(t,e){return Qt(t,e,1/0)}function Zt(t,e,i){return ht.iteratee!==Vt?ht.iteratee(t,e):Qt(t,e,i)}function Ht(t,e,i){e=Zt(e,i);for(var n=st(t),r=n.length,s={},o=0;o<r;o++){var a=n[o];s[a]=e(t[a],a,t)}return s}function Jt(){}function Kt(t){return null==t?Jt:function(e){return Bt(t,e)}}function $t(t,e,i){var n=Array(Math.max(0,t));e=Yt(e,i,1);for(var r=0;r<t;r++)n[r]=e(r);return n}function te(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}ht.toPath=kt,ht.iteratee=Vt;const ee=Date.now||function(){return(new Date).getTime()};function ie(t){var e=function(e){return t[e]},i="(?:"+st(t).join("|")+")",n=RegExp(i),r=RegExp(i,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(r,e):t}}const ne={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},re=ie(ne),se=ie(Ot(ne)),oe=ht.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var ae=/(.)^/,he={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},ue=/\\|'|\r|\n|\u2028|\u2029/g;function le(t){return"\\"+he[t]}var ce=/^\s*(\w|\$)+\s*$/;function fe(t,e,i){!e&&i&&(e=i),e=jt({},e,ht.templateSettings);var n=RegExp([(e.escape||ae).source,(e.interpolate||ae).source,(e.evaluate||ae).source].join("|")+"|$","g"),r=0,s="__p+='";t.replace(n,(function(e,i,n,o,a){return s+=t.slice(r,a).replace(ue,le),r=a+e.length,i?s+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?s+="'+\n((__t=("+n+"))==null?'':__t)+\n'":o&&(s+="';\n"+o+"\n__p+='"),e})),s+="';\n";var o,a=e.variable;if(a){if(!ce.test(a))throw new Error("variable is not a bare identifier: "+a)}else s="with(obj||{}){\n"+s+"}\n",a="obj";s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{o=new Function(a,"_",s)}catch(t){throw t.source=s,t}var h=function(t){return o.call(this,t,ht)};return h.source="function("+a+"){\n"+s+"}",h}function pe(t,e,i){var n=(e=qt(e)).length;if(!n)return k(i)?i.call(t):i;for(var r=0;r<n;r++){var s=null==t?void 0:t[e[r]];void 0===s&&(s=i,r=n),t=k(s)?s.call(t):s}return t}var de=0;function ye(t){var e=++de+"";return t?t+e:e}function ge(t){var e=ht(t);return e._chain=!0,e}function ve(t,e,i,n,r){if(!(n instanceof e))return t.apply(i,r);var s=Ft(t.prototype),o=t.apply(s,r);return b(o)?o:s}var me=w((function(t,e){var i=me.placeholder,n=function(){for(var r=0,s=e.length,o=Array(s),a=0;a<s;a++)o[a]=e[a]===i?arguments[r++]:e[a];for(;r<arguments.length;)o.push(arguments[r++]);return ve(t,n,this,this,o)};return n}));me.placeholder=ht;const _e=me,Me=w((function(t,e,i){if(!k(t))throw new TypeError("Bind must be called on a function");var n=w((function(r){return ve(t,n,e,this,i.concat(r))}));return n})),xe=J(nt);function we(t,e,i,n){if(n=n||[],e||0===e){if(e<=0)return n.concat(t)}else e=1/0;for(var r=n.length,s=0,o=nt(t);s<o;s++){var a=t[s];if(xe(a)&&(W(a)||Q(a)))if(e>1)we(a,e-1,i,n),r=n.length;else for(var h=0,u=a.length;h<u;)n[r++]=a[h++];else i||(n[r++]=a)}return n}const be=w((function(t,e){var i=(e=we(e,!1,!1)).length;if(i<1)throw new Error("bindAll must be passed function names");for(;i--;){var n=e[i];t[n]=Me(t[n],t)}return t}));function Ee(t,e){var i=function(n){var r=i.cache,s=""+(e?e.apply(this,arguments):n);return X(r,s)||(r[s]=t.apply(this,arguments)),r[s]};return i.cache={},i}const Ce=w((function(t,e,i){return setTimeout((function(){return t.apply(null,i)}),e)})),Se=_e(Ce,ht,1);function Pe(t,e,i){var n,r,s,o,a=0;i||(i={});var h=function(){a=!1===i.leading?0:ee(),n=null,o=t.apply(r,s),n||(r=s=null)},u=function(){var u=ee();a||!1!==i.leading||(a=u);var l=e-(u-a);return r=this,s=arguments,l<=0||l>e?(n&&(clearTimeout(n),n=null),a=u,o=t.apply(r,s),n||(r=s=null)):n||!1===i.trailing||(n=setTimeout(h,l)),o};return u.cancel=function(){clearTimeout(n),a=0,n=r=s=null},u}function Oe(t,e,i){var n,r,s,o,a,h=function(){var u=ee()-r;e>u?n=setTimeout(h,e-u):(n=null,i||(o=t.apply(a,s)),n||(s=a=null))},u=w((function(u){return a=this,s=u,r=ee(),n||(n=setTimeout(h,e),i&&(o=t.apply(a,s))),o}));return u.cancel=function(){clearTimeout(n),n=s=a=null},u}function Re(t,e){return _e(e,t)}function Ne(t){return function(){return!t.apply(this,arguments)}}function Ie(){var t=arguments,e=t.length-1;return function(){for(var i=e,n=t[e].apply(this,arguments);i--;)n=t[i].call(this,n);return n}}function Ae(t,e){return function(){if(--t<1)return e.apply(this,arguments)}}function je(t,e){var i;return function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=null),i}}const Fe=_e(je,2);function Te(t,e,i){e=Zt(e,i);for(var n,r=st(t),s=0,o=r.length;s<o;s++)if(e(t[n=r[s]],n,t))return n}function Le(t){return function(e,i,n){i=Zt(i,n);for(var r=nt(e),s=t>0?0:r-1;s>=0&&s<r;s+=t)if(i(e[s],s,e))return s;return-1}}const Ge=Le(1),ke=Le(-1);function qe(t,e,i,n){for(var r=(i=Zt(i,n,1))(e),s=0,o=nt(t);s<o;){var a=Math.floor((s+o)/2);i(t[a])<r?s=a+1:o=a}return s}function De(t,e,i){return function(n,r,s){var o=0,a=nt(n);if("number"==typeof s)t>0?o=s>=0?s:Math.max(s+a,o):a=s>=0?Math.min(s+1,a):s+a+1;else if(i&&s&&a)return n[s=i(n,r)]===r?s:-1;if(r!=r)return(s=e(h.call(n,o,a),Z))>=0?s+o:-1;for(s=t>0?o:a-1;s>=0&&s<a;s+=t)if(n[s]===r)return s;return-1}}const Be=De(1,Ge,qe),Ue=De(-1,ke);function ze(t,e,i){var n=(xe(t)?Ge:Te)(t,e,i);if(void 0!==n&&-1!==n)return t[n]}function We(t,e){return ze(t,Wt(e))}function Xe(t,e,i){var n,r;if(e=Yt(e,i),xe(t))for(n=0,r=t.length;n<r;n++)e(t[n],n,t);else{var s=st(t);for(n=0,r=s.length;n<r;n++)e(t[s[n]],s[n],t)}return t}function Ye(t,e,i){e=Zt(e,i);for(var n=!xe(t)&&st(t),r=(n||t).length,s=Array(r),o=0;o<r;o++){var a=n?n[o]:o;s[o]=e(t[a],a,t)}return s}function Qe(t){var e=function(e,i,n,r){var s=!xe(e)&&st(e),o=(s||e).length,a=t>0?0:o-1;for(r||(n=e[s?s[a]:a],a+=t);a>=0&&a<o;a+=t){var h=s?s[a]:a;n=i(n,e[h],h,e)}return n};return function(t,i,n,r){var s=arguments.length>=3;return e(t,Yt(i,r,4),n,s)}}const Ve=Qe(1),Ze=Qe(-1);function He(t,e,i){var n=[];return e=Zt(e,i),Xe(t,(function(t,i,r){e(t,i,r)&&n.push(t)})),n}function Je(t,e,i){return He(t,Ne(Zt(e)),i)}function Ke(t,e,i){e=Zt(e,i);for(var n=!xe(t)&&st(t),r=(n||t).length,s=0;s<r;s++){var o=n?n[s]:s;if(!e(t[o],o,t))return!1}return!0}function $e(t,e,i){e=Zt(e,i);for(var n=!xe(t)&&st(t),r=(n||t).length,s=0;s<r;s++){var o=n?n[s]:s;if(e(t[o],o,t))return!0}return!1}function ti(t,e,i,n){return xe(t)||(t=St(t)),("number"!=typeof i||n)&&(i=0),Be(t,e,i)>=0}const ei=w((function(t,e,i){var n,r;return k(e)?r=e:(e=qt(e),n=e.slice(0,-1),e=e[e.length-1]),Ye(t,(function(t){var s=r;if(!s){if(n&&n.length&&(t=Dt(t,n)),null==t)return;s=t[e]}return null==s?s:s.apply(t,i)}))}));function ii(t,e){return Ye(t,Xt(e))}function ni(t,e){return He(t,Wt(e))}function ri(t,e,i){var n,r,s=-1/0,o=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,h=(t=xe(t)?t:St(t)).length;a<h;a++)null!=(n=t[a])&&n>s&&(s=n);else e=Zt(e,i),Xe(t,(function(t,i,n){((r=e(t,i,n))>o||r===-1/0&&s===-1/0)&&(s=t,o=r)}));return s}function si(t,e,i){var n,r,s=1/0,o=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,h=(t=xe(t)?t:St(t)).length;a<h;a++)null!=(n=t[a])&&n<s&&(s=n);else e=Zt(e,i),Xe(t,(function(t,i,n){((r=e(t,i,n))<o||r===1/0&&s===1/0)&&(s=t,o=r)}));return s}function oi(t,e,i){if(null==e||i)return xe(t)||(t=St(t)),t[te(t.length-1)];var n=xe(t)?Lt(t):St(t),r=nt(n);e=Math.max(Math.min(e,r),0);for(var s=r-1,o=0;o<e;o++){var a=te(o,s),h=n[o];n[o]=n[a],n[a]=h}return n.slice(0,e)}function ai(t){return oi(t,1/0)}function hi(t,e,i){var n=0;return e=Zt(e,i),ii(Ye(t,(function(t,i,r){return{value:t,index:n++,criteria:e(t,i,r)}})).sort((function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(i<n||void 0===n)return-1}return t.index-e.index})),"value")}function ui(t,e){return function(i,n,r){var s=e?[[],[]]:{};return n=Zt(n,r),Xe(i,(function(e,r){var o=n(e,r,i);t(s,e,o)})),s}}const li=ui((function(t,e,i){X(t,i)?t[i].push(e):t[i]=[e]})),ci=ui((function(t,e,i){t[i]=e})),fi=ui((function(t,e,i){X(t,i)?t[i]++:t[i]=1})),pi=ui((function(t,e,i){t[i?0:1].push(e)}),!0);var di=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function yi(t){return t?W(t)?h.call(t):R(t)?t.match(di):xe(t)?Ye(t,zt):St(t):[]}function gi(t){return null==t?0:xe(t)?t.length:st(t).length}function vi(t,e,i){return e in i}const mi=w((function(t,e){var i={},n=e[0];if(null==t)return i;k(n)?(e.length>1&&(n=Yt(n,e[1])),e=dt(t)):(n=vi,e=we(e,!1,!1),t=Object(t));for(var r=0,s=e.length;r<s;r++){var o=e[r],a=t[o];n(a,o,t)&&(i[o]=a)}return i})),_i=w((function(t,e){var i,n=e[0];return k(n)?(n=Ne(n),e.length>1&&(i=e[1])):(e=Ye(we(e,!1,!1),String),n=function(t,i){return!ti(e,i)}),mi(t,n,i)}));function Mi(t,e,i){return h.call(t,0,Math.max(0,t.length-(null==e||i?1:e)))}function xi(t,e,i){return null==t||t.length<1?null==e||i?void 0:[]:null==e||i?t[0]:Mi(t,t.length-e)}function wi(t,e,i){return h.call(t,null==e||i?1:e)}function bi(t,e,i){return null==t||t.length<1?null==e||i?void 0:[]:null==e||i?t[t.length-1]:wi(t,Math.max(0,t.length-e))}function Ei(t){return He(t,Boolean)}function Ci(t,e){return we(t,e,!1)}const Si=w((function(t,e){return e=we(e,!0,!0),He(t,(function(t){return!ti(e,t)}))})),Pi=w((function(t,e){return Si(t,e)}));function Oi(t,e,i,n){S(e)||(n=i,i=e,e=!1),null!=i&&(i=Zt(i,n));for(var r=[],s=[],o=0,a=nt(t);o<a;o++){var h=t[o],u=i?i(h,o,t):h;e&&!i?(o&&s===u||r.push(h),s=u):i?ti(s,u)||(s.push(u),r.push(h)):ti(r,h)||r.push(h)}return r}const Ri=w((function(t){return Oi(we(t,!0,!0))}));function Ni(t){for(var e=[],i=arguments.length,n=0,r=nt(t);n<r;n++){var s=t[n];if(!ti(e,s)){var o;for(o=1;o<i&&ti(arguments[o],s);o++);o===i&&e.push(s)}}return e}function Ii(t){for(var e=t&&ri(t,nt).length||0,i=Array(e),n=0;n<e;n++)i[n]=ii(t,n);return i}const Ai=w(Ii);function ji(t,e){for(var i={},n=0,r=nt(t);n<r;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i}function Fi(t,e,i){null==e&&(e=t||0,t=0),i||(i=e<t?-1:1);for(var n=Math.max(Math.ceil((e-t)/i),0),r=Array(n),s=0;s<n;s++,t+=i)r[s]=t;return r}function Ti(t,e){if(null==e||e<1)return[];for(var i=[],n=0,r=t.length;n<r;)i.push(h.call(t,n,n+=e));return i}function Li(t,e){return t._chain?ht(e).chain():e}function Gi(t){return Xe(Rt(t),(function(e){var i=ht[e]=t[e];ht.prototype[e]=function(){var t=[this._wrapped];return a.apply(t,arguments),Li(this,i.apply(ht,t))}})),ht}Xe(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=r[t];ht.prototype[t]=function(){var i=this._wrapped;return null!=i&&(e.apply(i,arguments),"shift"!==t&&"splice"!==t||0!==i.length||delete i[0]),Li(this,i)}})),Xe(["concat","join","slice"],(function(t){var e=r[t];ht.prototype[t]=function(){var t=this._wrapped;return null!=t&&(t=e.apply(t,arguments)),Li(this,t)}}));const ki=ht;var qi=Gi(e);qi._=qi;const Di=qi;var Bi="1.3.0",Ui={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1};const zi="change",Wi=function(){function t(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.defaultPrevented=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}(),Xi=function(){function t(){this.disposed=!1}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();function Yi(t,e){return t>e?1:t<e?-1:0}function Qi(t,e){for(var i=Array.isArray(e)?e:[e],n=i.length,r=0;r<n;r++)t[t.length]=i[r]}function Vi(t,e){var i=t.length;if(i!==e.length)return!1;for(var n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Zi(){}var Hi="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),n=1,r=arguments.length;n<r;++n){var s=arguments[n];if(null!=s)for(var o in s)s.hasOwnProperty(o)&&(i[o]=s[o])}return i};function Ji(t){for(var e in t)delete t[e]}"function"==typeof Object.values&&Object.values;var Ki,$i=(Ki=function(t,e){return Ki=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},Ki(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}Ki(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const tn=function(t){function e(e){var i=t.call(this)||this;return i.eventTarget_=e,i.pendingRemovals_=null,i.dispatching_=null,i.listeners_=null,i}return $i(e,t),e.prototype.addEventListener=function(t,e){if(t&&e){var i=this.listeners_||(this.listeners_={}),n=i[t]||(i[t]=[]);-1===n.indexOf(e)&&n.push(e)}},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new Wi(t):t,i=e.type;e.target||(e.target=this.eventTarget_||this);var n,r=this.listeners_&&this.listeners_[i];if(r){var s=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});i in s||(s[i]=0,o[i]=0),++s[i];for(var a=0,h=r.length;a<h;++a)if(!1===(n="handleEvent"in r[a]?r[a].handleEvent(e):r[a].call(this,e))||e.propagationStopped){n=!1;break}if(--s[i],0===s[i]){var u=o[i];for(delete o[i];u--;)this.removeEventListener(i,Zi);delete s[i]}return n}},e.prototype.disposeInternal=function(){this.listeners_&&Ji(this.listeners_)},e.prototype.getListeners=function(t){return this.listeners_&&this.listeners_[t]||void 0},e.prototype.hasListener=function(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)},e.prototype.removeEventListener=function(t,e){var i=this.listeners_&&this.listeners_[t];if(i){var n=i.indexOf(e);-1!==n&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[n]=Zi,++this.pendingRemovals_[t]):(i.splice(n,1),0===i.length&&delete this.listeners_[t]))}},e}(Xi);function en(){return function(){throw new Error("Unimplemented abstract method.")}()}var nn=0,rn=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const sn=function(t){function e(e,i,n,r){var s=t.call(this)||this;return s.extent=e,s.pixelRatio_=n,s.resolution=i,s.state=r,s}return rn(e,t),e.prototype.changed=function(){this.dispatchEvent(zi)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return en()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){en()},e}(tn);function on(t){for(var e=[1/0,1/0,-1/0,-1/0],i=0,n=t.length;i<n;++i)dn(e,t[i]);return e}function an(t,e,i){var n,r;return(n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*n+(r=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0)*r}function hn(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function un(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]}function ln(t,e){var i=t[0],n=t[1],r=t[2],s=t[3],o=e[0],a=e[1],h=0;return o<i?h|=16:o>r&&(h|=4),a<n?h|=8:a>s&&(h|=2),0===h&&(h=1),h}function cn(t,e,i,n,r){return r?(r[0]=t,r[1]=e,r[2]=i,r[3]=n,r):[t,e,i,n]}function fn(t){return cn(1/0,1/0,-1/0,-1/0,t)}function pn(t,e,i,n,r){return yn(fn(r),t,e,i,n)}function dn(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function yn(t,e,i,n,r){for(;i<n;i+=r)gn(t,e[i],e[i+1]);return t}function gn(t,e,i){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],i)}function vn(t){return[t[0],t[1]]}function mn(t){return[t[2],t[1]]}function _n(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function Mn(t,e,i,n,r){var s=e*n[0]/2,o=e*n[1]/2,a=Math.cos(i),h=Math.sin(i),u=s*a,l=s*h,c=o*a,f=o*h,p=t[0],d=t[1],y=p-u+f,g=p-u-f,v=p+u-f,m=p+u+f,_=d-l-c,M=d-l+c,x=d+l+c,w=d+l-c;return cn(Math.min(y,g,v,m),Math.min(_,M,x,w),Math.max(y,g,v,m),Math.max(_,M,x,w),r)}function xn(t){return t[3]-t[1]}function wn(t){return[t[0],t[3]]}function bn(t){return[t[2],t[3]]}function En(t){return t[2]-t[0]}function Cn(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}var Sn={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},Pn={};Pn[Sn.RADIANS]=6370997/(2*Math.PI),Pn[Sn.DEGREES]=2*Math.PI*6370997/360,Pn[Sn.FEET]=.3048,Pn[Sn.METERS]=1,Pn[Sn.USFEET]=1200/3937;const On=Sn,Rn=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||Pn[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}();function Nn(t,e,i){return Math.min(Math.max(t,e),i)}var In="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2},An="log2"in Math?Math.log2:function(t){return Math.log(t)*Math.LOG2E};function jn(t,e,i,n,r,s){var o=r-i,a=s-n;if(0!==o||0!==a){var h=((t-i)*o+(e-n)*a)/(o*o+a*a);h>1?(i=r,n=s):h>0&&(i+=o*h,n+=a*h)}return Fn(t,e,i,n)}function Fn(t,e,i,n){var r=i-t,s=n-e;return r*r+s*s}function Tn(t){return t*Math.PI/180}function Ln(t,e){var i=t%e;return i*e<0?i+e:i}function Gn(t,e,i){return t+i*(e-t)}var kn=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),qn=6378137,Dn=Math.PI*qn,Bn=[-Dn,-Dn,Dn,Dn],Un=[-180,-85,180,85],zn=qn*Math.log(Math.tan(Math.PI/2)),Wn=function(t){function e(e){return t.call(this,{code:e,units:On.METERS,extent:Bn,global:!0,worldExtent:Un,getPointResolution:function(t,e){return t/In(e[1]/qn)}})||this}return kn(e,t),e}(Rn),Xn=[new Wn("EPSG:3857"),new Wn("EPSG:102100"),new Wn("EPSG:102113"),new Wn("EPSG:900913"),new Wn("http://www.opengis.net/def/crs/EPSG/0/3857"),new Wn("http://www.opengis.net/gml/srs/epsg.xml#3857")];var Yn=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Qn=[-180,-90,180,90],Vn=6378137*Math.PI/180,Zn=function(t){function e(e,i){return t.call(this,{code:e,units:On.DEGREES,extent:Qn,axisOrientation:i,global:!0,metersPerUnit:Vn,worldExtent:Qn})||this}return Yn(e,t),e}(Rn),Hn=[new Zn("CRS:84"),new Zn("EPSG:4326","neu"),new Zn("urn:ogc:def:crs:OGC:1.3:CRS84"),new Zn("urn:ogc:def:crs:OGC:2:84"),new Zn("http://www.opengis.net/def/crs/OGC/1.3/CRS84","neu"),new Zn("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Zn("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],Jn={},Kn={};function $n(t,e,i){var n=t.getCode(),r=e.getCode();n in Kn||(Kn[n]={}),Kn[n][r]=i}function tr(t,e){var i;return t in Kn&&e in Kn[t]&&(i=Kn[t][e]),i}var er,ir,nr;function rr(t,e,i){var n=i||6371008.8,r=Tn(t[1]),s=Tn(e[1]),o=(s-r)/2,a=Tn(e[0]-t[0])/2,h=Math.sin(o)*Math.sin(o)+Math.sin(a)*Math.sin(a)*Math.cos(r)*Math.cos(s);return 2*n*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))}function sr(t,e,i){var n;if(void 0!==e){for(var r=0,s=t.length;r<s;++r)e[r]=t[r];n=e}else n=t.slice();return n}function or(t,e,i){if(void 0!==e&&t!==e){for(var n=0,r=t.length;n<r;++n)e[n]=t[n];t=e}return t}function ar(t){!function(t,e){Jn[t]=e}(t.getCode(),t),$n(t,t,sr)}function hr(t){return"string"==typeof t?Jn[e=t]||Jn[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function ur(t,e,i,n){var r,s=(t=hr(t)).getPointResolutionFunc();if(s)r=s(e,i),n&&n!==t.getUnits()&&(a=t.getMetersPerUnit())&&(r=r*a/Pn[n]);else{var o=t.getUnits();if(o==On.DEGREES&&!n||n==On.DEGREES)r=e;else{var a,h=pr(t,hr("EPSG:4326"));if(h===or&&o!==On.DEGREES)r=e*t.getMetersPerUnit();else{var u=[i[0]-e/2,i[1],i[0]+e/2,i[1],i[0],i[1]-e/2,i[0],i[1]+e/2];r=(rr((u=h(u,u,2)).slice(0,2),u.slice(2,4))+rr(u.slice(4,6),u.slice(6,8)))/2}void 0!==(a=n?Pn[n]:t.getMetersPerUnit())&&(r/=a)}}return r}function lr(t){!function(t){t.forEach(ar)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&$n(e,t,sr)}))}))}function cr(t){return function(e,i,n){for(var r=e.length,s=void 0!==n?n:2,o=void 0!==i?i:new Array(r),a=0;a<r;a+=s){var h=t([e[a],e[a+1]]);o[a]=h[0],o[a+1]=h[1];for(var u=s-1;u>=2;--u)o[a+u]=e[a+u]}return o}}function fr(t,e){if(t===e)return!0;var i=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||pr(t,e)===sr)&&i}function pr(t,e){var i=tr(t.getCode(),e.getCode());return i||(i=or),i}function dr(t,e){return pr(hr(t),hr(e))}function yr(t,e,i){return dr(e,i)(t,void 0,t.length)}function gr(t,e,i,n){return function(t,e,i,n){var r=[];if(n>1)for(var s=t[2]-t[0],o=t[3]-t[1],a=0;a<n;++a)r.push(t[0]+s*a/n,t[1],t[2],t[1]+o*a/n,t[2]-s*a/n,t[3],t[0],t[3]-o*a/n);else r=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(r,r,2);for(var h=[],u=[],l=(a=0,r.length);a<l;a+=2)h.push(r[a]),u.push(r[a+1]);return function(t,e,i){return cn(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),i)}(h,u,i)}(t,dr(e,i),void 0,n)}function vr(t,e,i){return function(n){var r,s,o=n[0],a=n[1];if(t.canWrapX()){var h=t.getExtent(),u=En(h);(s=function(t,e,i){var n=e.getExtent(),r=0;if(e.canWrapX()&&(t[0]<n[0]||t[0]>n[2])){var s=i||En(n);r=Math.floor((t[0]-n[0])/s)}return r}(n,t,u))&&(o-=s*u),o=Nn(o,h[0],h[2]),a=Nn(a,h[1],h[3]),r=i([o,a])}else r=i(n);return s&&e.canWrapX()&&(r[0]+=s*En(e.getExtent())),r}}lr(Xn),lr(Hn),er=Xn,ir=function(t,e,i){var n=t.length,r=i>1?i:2,s=e;void 0===s&&(s=r>2?t.slice():new Array(n));for(var o=0;o<n;o+=r){s[o]=Dn*t[o]/180;var a=qn*Math.log(Math.tan(Math.PI*(+t[o+1]+90)/360));a>zn?a=zn:a<-zn&&(a=-zn),s[o+1]=a}return s},nr=function(t,e,i){var n=t.length,r=i>1?i:2,s=e;void 0===s&&(s=r>2?t.slice():new Array(n));for(var o=0;o<n;o+=r)s[o]=180*t[o]/Dn,s[o+1]=360*Math.atan(Math.exp(t[o+1]/qn))/Math.PI-90;return s},Hn.forEach((function(t){er.forEach((function(e){$n(t,e,ir),$n(e,t,nr)}))}));const mr=function(){function t(t,e,i,n,r,s){this.sourceProj_=t,this.targetProj_=e;var o={},a=dr(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return o[e]||(o[e]=a(t)),o[e]},this.maxSourceExtent_=n,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&En(n)==En(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?En(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?En(this.targetProj_.getExtent()):null;var h,u,l=wn(i),c=bn(i),f=mn(i),p=vn(i),d=this.transformInv_(l),y=this.transformInv_(c),g=this.transformInv_(f),v=this.transformInv_(p),m=10+(s?Math.max(0,Math.ceil(An((u=0,function(t){return t[2]<t[0]||t[3]<t[1]}(h=i)||(u=En(h)*xn(h)),u/(s*s*256*256))))):0);if(this.addQuad_(l,c,f,p,d,y,g,v,m),this.wrapsXInSource_){var _=1/0;this.triangles_.forEach((function(t,e,i){_=Math.min(_,t.source[0][0],t.source[1][0],t.source[2][0])})),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-_>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-_>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-_>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-_>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var i=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-i<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}o={}}return t.prototype.addTriangle_=function(t,e,i,n,r,s){this.triangles_.push({source:[n,r,s],target:[t,e,i]})},t.prototype.addQuad_=function(t,e,i,n,r,s,o,a,h){var u=on([r,s,o,a]),l=this.sourceWorldWidth_?En(u)/this.sourceWorldWidth_:null,c=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&l>.5&&l<1,p=!1;if(h>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(p=En(on([t,e,i,n]))/this.targetWorldWidth_>.25||p),!f&&this.sourceProj_.isGlobal()&&l&&(p=l>.25||p)),!(!p&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3]))||Cn(u,this.maxSourceExtent_)){var d=0;if(!(p||isFinite(r[0])&&isFinite(r[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])))if(h>0)p=!0;else if(1!=(d=(isFinite(r[0])&&isFinite(r[1])?0:8)+(isFinite(s[0])&&isFinite(s[1])?0:4)+(isFinite(o[0])&&isFinite(o[1])?0:2)+(isFinite(a[0])&&isFinite(a[1])?0:1))&&2!=d&&4!=d&&8!=d)return;if(h>0){if(!p){var y=[(t[0]+i[0])/2,(t[1]+i[1])/2],g=this.transformInv_(y),v=void 0;v=f?(Ln(r[0],c)+Ln(o[0],c))/2-Ln(g[0],c):(r[0]+o[0])/2-g[0];var m=(r[1]+o[1])/2-g[1];p=v*v+m*m>this.errorThresholdSquared_}if(p){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){var _=[(e[0]+i[0])/2,(e[1]+i[1])/2],M=this.transformInv_(_),x=[(n[0]+t[0])/2,(n[1]+t[1])/2],w=this.transformInv_(x);this.addQuad_(t,e,_,x,r,s,M,w,h-1),this.addQuad_(x,_,i,n,w,M,o,a,h-1)}else{var b=[(t[0]+e[0])/2,(t[1]+e[1])/2],E=this.transformInv_(b),C=[(i[0]+n[0])/2,(i[1]+n[1])/2],S=this.transformInv_(C);this.addQuad_(t,b,C,n,r,E,S,a,h-1),this.addQuad_(b,e,i,C,E,s,o,S,h-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&d)&&this.addTriangle_(t,i,n,r,o,a),0==(14&d)&&this.addTriangle_(t,i,e,r,o,s),d&&(0==(13&d)&&this.addTriangle_(e,n,t,s,a,r),0==(7&d)&&this.addTriangle_(e,n,i,s,a,o))}},t.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach((function(e,i,n){var r=e.source;dn(t,r[0]),dn(t,r[1]),dn(t,r[2])})),t},t.prototype.getTriangles=function(){return this.triangles_},t}();var _r,Mr="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",xr=(Mr.indexOf("firefox"),-1!==Mr.indexOf("safari")&&Mr.indexOf("chrom"),-1!==Mr.indexOf("webkit")&&Mr.indexOf("edge"),Mr.indexOf("macintosh"),"undefined"!=typeof devicePixelRatio&&devicePixelRatio,"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope),wr="undefined"!=typeof Image&&Image.prototype.decode;function br(t,e,i,n){var r;return i&&i.length?r=i.shift():xr?r=new OffscreenCanvas(t||300,e||300):(r=document.createElement("canvas")).style.all="unset",t&&(r.width=t),e&&(r.height=e),r.getContext("2d",n)}function Er(t,e,i,n,r){t.beginPath(),t.moveTo(0,0),t.lineTo(e,i),t.lineTo(n,r),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,n)+1,Math.max(i,r)),t.restore()}function Cr(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function Sr(t,e,i,n){var r=yr(i,e,t),s=ur(e,n,i),o=e.getMetersPerUnit();void 0!==o&&(s*=o);var a=t.getMetersPerUnit();void 0!==a&&(s/=a);var h,u=t.getExtent();if(!u||un(u,(h=r)[0],h[1])){var l=ur(t,s,r)/s;isFinite(l)&&l>0&&(s/=l)}return s}function Pr(t,e,i,n,r){if(n&&n!==t&&(i=i.bind(n)),r){var s=i;i=function(){t.removeEventListener(e,i),s.apply(this,arguments)}}var o={target:t,type:e,listener:i};return t.addEventListener(e,i),o}function Or(t,e,i,n){return Pr(t,e,i,n,!0)}function Rr(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),Ji(t))}!function(){try{var t=Object.defineProperty({},"passive",{get:function(){!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch(t){}}();var Nr=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Ir=function(t){function e(e,i,n,r,s,o,a){var h=this,u=e.getExtent(),l=i.getExtent(),c=l?function(t,e,i){var n=i||[1/0,1/0,-1/0,-1/0];return Cn(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):fn(n),n}(n,l):n,f=Sr(e,i,_n(c),r),p=new mr(e,i,c,u,.5*f,r),d=o(p.calculateSourceExtent(),f,s),y=d?0:4,g=d?d.getPixelRatio():1;return(h=t.call(this,n,r,g,y)||this).targetProj_=i,h.maxSourceExtent_=u,h.triangulation_=p,h.targetResolution_=r,h.targetExtent_=n,h.sourceImage_=d,h.sourcePixelRatio_=g,h.contextOptions_=a,h.canvas_=null,h.sourceListenerKey_=null,h}return Nr(e,t),e.prototype.disposeInternal=function(){1==this.state&&this.unlistenSource_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.getProjection=function(){return this.targetProj_},e.prototype.reproject_=function(){var t=this.sourceImage_.getState();if(2==t){var e=En(this.targetExtent_)/this.targetResolution_,i=xn(this.targetExtent_)/this.targetResolution_;this.canvas_=function(t,e,i,n,r,s,o,a,h,u,l,c){var f=br(Math.round(i*t),Math.round(i*e));if(Hi(f,c),0===h.length)return f.canvas;function p(t){return Math.round(t*i)/i}f.scale(i,i),f.globalCompositeOperation="lighter";var d=[1/0,1/0,-1/0,-1/0];h.forEach((function(t,e,i){var n,r;n=d,(r=t.extent)[0]<n[0]&&(n[0]=r[0]),r[2]>n[2]&&(n[2]=r[2]),r[1]<n[1]&&(n[1]=r[1]),r[3]>n[3]&&(n[3]=r[3])}));var y=En(d),g=xn(d),v=br(Math.round(i*y/n),Math.round(i*g/n));Hi(v,c);var m=i/n;h.forEach((function(t,e,i){var n=t.extent[0]-d[0],r=-(t.extent[3]-d[3]),s=En(t.extent),o=xn(t.extent);t.image.width>0&&t.image.height>0&&v.drawImage(t.image,u,u,t.image.width-2*u,t.image.height-2*u,n*m,r*m,s*m,o*m)}));var _=wn(o);return a.getTriangles().forEach((function(t,e,r){var o=t.source,a=t.target,h=o[0][0],u=o[0][1],l=o[1][0],y=o[1][1],g=o[2][0],m=o[2][1],M=p((a[0][0]-_[0])/s),x=p(-(a[0][1]-_[1])/s),w=p((a[1][0]-_[0])/s),b=p(-(a[1][1]-_[1])/s),E=p((a[2][0]-_[0])/s),C=p(-(a[2][1]-_[1])/s),S=h,P=u;h=0,u=0;var O=function(t){for(var e=t.length,i=0;i<e;i++){for(var n=i,r=Math.abs(t[i][i]),s=i+1;s<e;s++){var o=Math.abs(t[s][i]);o>r&&(r=o,n=s)}if(0===r)return null;var a=t[n];t[n]=t[i],t[i]=a;for(var h=i+1;h<e;h++)for(var u=-t[h][i]/t[i][i],l=i;l<e+1;l++)i==l?t[h][l]=0:t[h][l]+=u*t[i][l]}for(var c=new Array(e),f=e-1;f>=0;f--){c[f]=t[f][e]/t[f][f];for(var p=f-1;p>=0;p--)t[p][e]-=t[p][f]*c[f]}return c}([[l-=S,y-=P,0,0,w-M],[g-=S,m-=P,0,0,E-M],[0,0,l,y,b-x],[0,0,g,m,C-x]]);if(O){if(f.save(),f.beginPath(),function(){if(void 0===_r){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",Er(t,4,5,4,0),Er(t,4,5,0,5);var e=t.getImageData(0,0,3,3).data;_r=Cr(e,0)||Cr(e,4)||Cr(e,8)}return _r}()||c===Ui){f.moveTo(w,b);for(var R=M-w,N=x-b,I=0;I<4;I++)f.lineTo(w+p((I+1)*R/4),b+p(I*N/3)),3!=I&&f.lineTo(w+p((I+1)*R/4),b+p((I+1)*N/3));f.lineTo(E,C)}else f.moveTo(w,b),f.lineTo(M,x),f.lineTo(E,C);f.clip(),f.transform(O[0],O[2],O[1],O[3],M,x),f.translate(d[0]-S,d[3]-P),f.scale(n/i,-n/i),f.drawImage(v.canvas,0,0),f.restore()}})),l&&(f.save(),f.globalCompositeOperation="source-over",f.strokeStyle="black",f.lineWidth=1,a.getTriangles().forEach((function(t,e,i){var n=t.target,r=(n[0][0]-_[0])/s,o=-(n[0][1]-_[1])/s,a=(n[1][0]-_[0])/s,h=-(n[1][1]-_[1])/s,u=(n[2][0]-_[0])/s,l=-(n[2][1]-_[1])/s;f.beginPath(),f.moveTo(a,h),f.lineTo(r,o),f.lineTo(u,l),f.closePath(),f.stroke()})),f.restore()),f.canvas}(e,i,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.contextOptions_)}this.state=t,this.changed()},e.prototype.load=function(){if(0==this.state){this.state=1,this.changed();var t=this.sourceImage_.getState();2==t||3==t?this.reproject_():(this.sourceListenerKey_=Pr(this.sourceImage_,zi,(function(t){var e=this.sourceImage_.getState();2!=e&&3!=e||(this.unlistenSource_(),this.reproject_())}),this),this.sourceImage_.load())}},e.prototype.unlistenSource_=function(){Rr(this.sourceListenerKey_),this.sourceListenerKey_=null},e}(sn);var Ar=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),jr=function(t){function e(){var e=t.call(this)||this;return e.on=e.onInternal,e.once=e.onceInternal,e.un=e.unInternal,e.revision_=0,e}return Ar(e,t),e.prototype.changed=function(){++this.revision_,this.dispatchEvent(zi)},e.prototype.getRevision=function(){return this.revision_},e.prototype.onInternal=function(t,e){if(Array.isArray(t)){for(var i=t.length,n=new Array(i),r=0;r<i;++r)n[r]=Pr(this,t[r],e);return n}return Pr(this,t,e)},e.prototype.onceInternal=function(t,e){var i;if(Array.isArray(t)){var n=t.length;i=new Array(n);for(var r=0;r<n;++r)i[r]=Or(this,t[r],e)}else i=Or(this,t,e);return e.ol_key=i,i},e.prototype.unInternal=function(t,e){var i=e.ol_key;if(i)!function(t){if(Array.isArray(t))for(var e=0,i=t.length;e<i;++e)Rr(t[e]);else Rr(t)}(i);else if(Array.isArray(t))for(var n=0,r=t.length;n<r;++n)this.removeEventListener(t[n],e);else this.removeEventListener(t,e)},e}(tn);jr.prototype.on,jr.prototype.once,jr.prototype.un;const Fr=jr;var Tr=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Lr=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.key=i,r.oldValue=n,r}return Tr(e,t),e}(Wi),Gr=function(t){function e(e){var i,n=t.call(this)||this;return n.on,n.once,n.un,(i=n).ol_uid||(i.ol_uid=String(++nn)),n.values_=null,void 0!==e&&n.setProperties(e),n}return Tr(e,t),e.prototype.get=function(t){var e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},e.prototype.getProperties=function(){return this.values_&&Hi({},this.values_)||{}},e.prototype.hasProperties=function(){return!!this.values_},e.prototype.notify=function(t,e){var i;i="change:"+t,this.dispatchEvent(new Lr(i,t,e)),i="propertychange",this.dispatchEvent(new Lr(i,t,e))},e.prototype.addChangeListener=function(t,e){this.addEventListener("change:"+t,e)},e.prototype.removeChangeListener=function(t,e){this.removeEventListener("change:"+t,e)},e.prototype.set=function(t,e,i){var n=this.values_||(this.values_={});if(i)n[t]=e;else{var r=n[t];n[t]=e,r!==e&&this.notify(t,r)}},e.prototype.setProperties=function(t,e){for(var i in t)this.set(i,t[i],e)},e.prototype.applyProperties=function(t){t.values_&&Hi(this.values_||(this.values_={}),t.values_)},e.prototype.unset=function(t,e){if(this.values_&&t in this.values_){var i=this.values_[t];delete this.values_[t],function(t){var e;for(e in t)return!1;return!e}(this.values_)&&(this.values_=null),e||this.notify(t,i)}},e}(Fr);const kr=Gr;var qr=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Dr=function(t){function e(e){var i=t.call(this)||this;i.projection=hr(e.projection),i.attributions_=Br(e.attributions),i.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,i.loading=!1,i.state_=void 0!==e.state?e.state:"ready",i.wrapX_=void 0!==e.wrapX&&e.wrapX,i.viewResolver=null,i.viewRejector=null;var n=i;return i.viewPromise_=new Promise((function(t,e){n.viewResolver=t,n.viewRejector=e})),i}return qr(e,t),e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection},e.prototype.getResolutions=function(){return en()},e.prototype.getView=function(){return this.viewPromise_},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.getContextOptions=function(){},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=Br(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(kr);function Br(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}const Ur=Dr;var zr=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Wr=function(t){function e(e,i){var n=t.call(this,e)||this;return n.image=i,n}return zr(e,t),e}(Wi);function Xr(t,e){t.getImage().src=e}const Yr=function(t){function e(e){var i=t.call(this,{attributions:e.attributions,projection:e.projection,state:e.state})||this;return i.on,i.once,i.un,i.resolutions_=void 0!==e.resolutions?e.resolutions:null,i.reprojectedImage_=null,i.reprojectedRevision_=0,i.contextOptions_=!1===e.imageSmoothing?Ui:void 0,i}return zr(e,t),e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getContextOptions=function(){return this.contextOptions_},e.prototype.findNearestResolution=function(t){if(this.resolutions_){var e=function(t,e,i){var n=t.length;if(t[0]<=e)return 0;if(e<=t[n-1])return n-1;var r=void 0;for(r=1;r<n;++r){if(t[r]==e)return r;if(t[r]<e)return t[r-1]-e<e-t[r]?r-1:r}return n-1}(this.resolutions_,t);t=this.resolutions_[e]}return t},e.prototype.getImage=function(t,e,i,n){var r,s,o=this.getProjection();if(o&&n&&!fr(o,n)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&fr(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==e&&(s=t,(r=this.reprojectedImage_.getExtent())[0]==s[0]&&r[2]==s[2]&&r[1]==s[1]&&r[3]==s[3]))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new Ir(o,n,t,e,i,function(t,e,i){return this.getImageInternal(t,e,i,o)}.bind(this),this.contextOptions_),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return o&&(n=o),this.getImageInternal(t,e,i,n)},e.prototype.getImageInternal=function(t,e,i,n){return en()},e.prototype.handleImageChange=function(t){var e=t.target;switch(e.getState()){case 1:this.loading=!0,this.dispatchEvent(new Wr("imageloadstart",e));break;case 2:this.loading=!1,this.dispatchEvent(new Wr("imageloadend",e));break;case 3:this.loading=!1,this.dispatchEvent(new Wr("imageloaderror",e))}},e}(Ur);var Qr=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Vr=function(t){function e(e,i,n,r,s,o){var a=t.call(this,e,i,n,0)||this;return a.src_=r,a.image_=new Image,null!==s&&(a.image_.crossOrigin=s),a.unlisten_=null,a.state=0,a.imageLoadFunction_=o,a}return Qr(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=3,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=xn(this.extent)/this.image_.height),this.state=2,this.unlistenImage_(),this.changed()},e.prototype.load=function(){0!=this.state&&3!=this.state||(this.state=1,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=function(t,e,i){var n=t;if(n.src&&wr){var r=n.decode(),s=!0;return r.then((function(){s&&e()})).catch((function(t){s&&("EncodingError"===t.name&&"Invalid image type."===t.message?e():i())})),function(){s=!1}}var o=[Or(n,"load",e),Or(n,"error",i)];return function(){o.forEach(Rr)}}(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t,this.resolution=xn(this.extent)/this.image_.height},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(sn);function Zr(t,e){var i=[];Object.keys(e).forEach((function(t){null!==e[t]&&void 0!==e[t]&&i.push(t+"="+encodeURIComponent(e[t]))}));var n=i.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+n}var Hr=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Jr=function(t){function e(e){var i=this,n="Assertion failed. See https://openlayers.org/en/v"+"6.9.0".split("-")[0]+"/doc/errors/#"+e+" for details.";return(i=t.call(this,n)||this).code=e,i.name="AssertionError",i.message=n,i}return Hr(e,t),e}(Error);function Kr(t,e){if(!t)throw new Jr(e)}var $r=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ts=[101,101],es=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this,{attributions:n.attributions,imageSmoothing:n.imageSmoothing,projection:n.projection,resolutions:n.resolutions})||this).crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null,i.url_=n.url,i.imageLoadFunction_=void 0!==n.imageLoadFunction?n.imageLoadFunction:Xr,i.params_=n.params||{},i.v13_=!0,i.updateV13_(),i.serverType_=n.serverType,i.hidpi_=void 0===n.hidpi||n.hidpi,i.image_=null,i.imageSize_=[0,0],i.renderedRevision_=0,i.ratio_=void 0!==n.ratio?n.ratio:1.5,i}return $r(e,t),e.prototype.getFeatureInfoUrl=function(t,e,i,n){if(void 0!==this.url_){var r=hr(i),s=this.getProjection();s&&s!==r&&(e=Sr(s,r,t,e),t=yr(t,r,s));var o=Mn(t,e,0,ts),a={SERVICE:"WMS",VERSION:Bi,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Hi(a,this.params_,n);var h=Math.floor((t[0]-o[0])/e),u=Math.floor((o[3]-t[1])/e);return a[this.v13_?"I":"X"]=h,a[this.v13_?"J":"Y"]=u,this.getRequestUrl_(o,ts,1,s||r,a)}},e.prototype.getLegendUrl=function(t,e){if(void 0!==this.url_){var i={SERVICE:"WMS",VERSION:Bi,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){var n=this.params_.LAYERS;if(Array.isArray(n)&&1!==n.length)return;i.LAYER=n}if(void 0!==t){var r=this.getProjection()?this.getProjection().getMetersPerUnit():1;i.SCALE=t*r/28e-5}return Hi(i,e),Zr(this.url_,i)}},e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,i,n){if(void 0===this.url_)return null;e=this.findNearestResolution(e),1==i||this.hidpi_&&void 0!==this.serverType_||(i=1);var r=e/i,s=_n(t),o=Mn(s,r,0,[Math.ceil(En(t)/r),Math.ceil(xn(t)/r)]),a=Mn(s,r,0,[Math.ceil(this.ratio_*En(t)/r),Math.ceil(this.ratio_*xn(t)/r)]),h=this.image_;if(h&&this.renderedRevision_==this.getRevision()&&h.getResolution()==e&&h.getPixelRatio()==i&&hn(h.getExtent(),o))return h;var u={SERVICE:"WMS",VERSION:Bi,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Hi(u,this.params_),this.imageSize_[0]=Math.round(En(a)/r),this.imageSize_[1]=Math.round(xn(a)/r);var l=this.getRequestUrl_(a,this.imageSize_,i,n,u);return this.image_=new Vr(a,e,i,l,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(zi,this.handleImageChange.bind(this)),this.image_},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.getRequestUrl_=function(t,e,i,n,r){if(Kr(void 0!==this.url_,9),r[this.v13_?"CRS":"SRS"]=n.getCode(),"STYLES"in this.params_||(r.STYLES=""),1!=i)switch(this.serverType_){case"geoserver":var s=90*i+.5|0;"FORMAT_OPTIONS"in r?r.FORMAT_OPTIONS+=";dpi:"+s:r.FORMAT_OPTIONS="dpi:"+s;break;case"mapserver":r.MAP_RESOLUTION=90*i;break;case"carmentaserver":case"qgis":r.DPI=90*i;break;default:Kr(!1,8)}r.WIDTH=e[0],r.HEIGHT=e[1];var o,a=n.getAxisOrientation();return o=this.v13_&&"ne"==a.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,r.BBOX=o.join(","),Zr(this.url_,r)},e.prototype.getUrl=function(){return this.url_},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},e.prototype.updateParams=function(t){Hi(this.params_,t),this.updateV13_(),this.image_=null,this.changed()},e.prototype.updateV13_=function(){var t=this.params_.VERSION||Bi;this.v13_=function(t,e){for(var i=(""+t).split("."),n="1.3".split("."),r=0;r<Math.max(i.length,n.length);r++){var s=parseInt(i[r]||"0",10),o=parseInt(n[r]||"0",10);if(s>o)return 1;if(o>s)return-1}return 0}(t)>=0},e}(Yr);const is=es;var ns=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),rs=function(t){function e(e){var i=t.call(this)||this;if(i.on,i.once,i.un,i.id_=void 0,i.geometryName_="geometry",i.style_=null,i.styleFunction_=void 0,i.geometryChangeKey_=null,i.addChangeListener(i.geometryName_,i.handleGeometryChanged_),e)if("function"==typeof e.getSimplifiedGeometry){var n=e;i.setGeometry(n)}else{var r=e;i.setProperties(r)}return i}return ns(e,t),e.prototype.clone=function(){var t=new e(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var n=this.getStyle();return n&&t.setStyle(n),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(Rr(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=Pr(t,zi,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){var e,i;this.style_=t,this.styleFunction_=t?"function"==typeof(e=t)?e:(Array.isArray(e)?i=e:(Kr("function"==typeof e.getZIndex,41),i=[e]),function(){return i}):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(kr);const ss=rs,os="XY",as="XYZ",hs="XYM",us="XYZM";new Array(6);var ls=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),cs=[1,0,0,1,0,0],ps=function(t){function e(){var e,i,n,r,s,o=t.call(this)||this;return o.extent_=[1/0,1/0,-1/0,-1/0],o.extentRevision_=-1,o.simplifiedGeometryMaxMinSquaredTolerance=0,o.simplifiedGeometryRevision=0,o.simplifyTransformedInternal=(e=function(t,e,i){if(!i)return this.getSimplifiedGeometry(e);var n=this.clone();return n.applyTransform(i),n.getSimplifiedGeometry(e)},s=!1,function(){var t=Array.prototype.slice.call(arguments);return s&&this===r&&Vi(t,n)||(s=!0,r=this,n=t,i=e.apply(this,arguments)),i}),o}return ls(e,t),e.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},e.prototype.clone=function(){return en()},e.prototype.closestPointXY=function(t,e,i,n){return en()},e.prototype.containsXY=function(t,e){var i=this.getClosestPoint([t,e]);return i[0]===t&&i[1]===e},e.prototype.getClosestPoint=function(t,e){var i=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return en()},e.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&fn(e),this.extentRevision_=this.getRevision()}return function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)},e.prototype.rotate=function(t,e){en()},e.prototype.scale=function(t,e,i){en()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return en()},e.prototype.getType=function(){return en()},e.prototype.applyTransform=function(t){en()},e.prototype.intersectsExtent=function(t){return en()},e.prototype.translate=function(t,e){en()},e.prototype.transform=function(t,e){var i=hr(t),n=i.getUnits()==On.TILE_PIXELS?function(t,n,r){var s=i.getExtent(),o=i.getWorldExtent(),a=xn(o)/xn(s);return function(t,e,i,n,r,s,o,a){var h=Math.sin(s),u=Math.cos(s);t[0]=n*u,t[1]=r*h,t[2]=-n*h,t[3]=r*u,t[4]=o*n*u-a*n*h+e,t[5]=o*r*h+a*r*u+i}(cs,o[0],o[3],a,-a,0,0,0),function(t,e,i,n,r,s){for(var o=s||[],a=0,h=0;h<i;h+=n){var u=t[h],l=t[h+1];o[a++]=r[0]*u+r[2]*l+r[4],o[a++]=r[1]*u+r[3]*l+r[5]}s&&o.length!=a&&(o.length=a)}(t,0,t.length,r,cs,n),dr(i,e)(t,n,r)}:dr(i,e);return this.applyTransform(n),this},e}(kr);const ds=ps;var ys=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),gs=function(t){function e(){var e=t.call(this)||this;return e.layout=os,e.stride=2,e.flatCoordinates=null,e}return ys(e,t),e.prototype.computeExtent=function(t){return pn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return en()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=vs(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){en()},e.prototype.setLayout=function(t,e,i){var n;if(t)n=vs(t);else{for(var r=0;r<i;++r){if(0===e.length)return this.layout=os,void(this.stride=2);e=e[0]}t=function(t){var e;return 2==t?e=os:3==t?e=as:4==t&&(e=us),e}(n=e.length)}this.layout=t,this.stride=n},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var i=this.getFlatCoordinates();if(i){var n=this.getStride();!function(t,e,i,n,r,s,o){for(var a=o||[],h=Math.cos(r),u=Math.sin(r),l=s[0],c=s[1],f=0,p=0;p<i;p+=n){var d=t[p]-l,y=t[p+1]-c;a[f++]=l+d*h-y*u,a[f++]=c+d*u+y*h;for(var g=p+2;g<p+n;++g)a[f++]=t[g]}o&&a.length!=f&&(a.length=f)}(i,0,i.length,n,t,e,i),this.changed()}},e.prototype.scale=function(t,e,i){var n=e;void 0===n&&(n=t);var r=i;r||(r=_n(this.getExtent()));var s=this.getFlatCoordinates();if(s){var o=this.getStride();!function(t,e,i,n,r,s,o,a){for(var h=a||[],u=o[0],l=o[1],c=0,f=0;f<i;f+=n){var p=t[f]-u,d=t[f+1]-l;h[c++]=u+r*p,h[c++]=l+s*d;for(var y=f+2;y<f+n;++y)h[c++]=t[y]}a&&h.length!=c&&(h.length=c)}(s,0,s.length,o,t,n,r,s),this.changed()}},e.prototype.translate=function(t,e){var i=this.getFlatCoordinates();if(i){var n=this.getStride();!function(t,e,i,n,r,s,o){for(var a=o||[],h=0,u=0;u<i;u+=n){a[h++]=t[u]+r,a[h++]=t[u+1]+s;for(var l=u+2;l<u+n;++l)a[h++]=t[l]}o&&a.length!=h&&(a.length=h)}(i,0,i.length,n,t,e,i),this.changed()}},e}(ds);function vs(t){var e;return t==os?e=2:t==as||t==hs?e=3:t==us&&(e=4),e}const ms=gs;function _s(t,e,i,n,r,s,o){var a,h=t[e],u=t[e+1],l=t[i]-h,c=t[i+1]-u;if(0===l&&0===c)a=e;else{var f=((r-h)*l+(s-u)*c)/(l*l+c*c);if(f>1)a=i;else{if(f>0){for(var p=0;p<n;++p)o[p]=Gn(t[e+p],t[i+p],f);return void(o.length=n)}a=e}}for(p=0;p<n;++p)o[p]=t[a+p];o.length=n}function Ms(t,e,i,n,r){var s=t[e],o=t[e+1];for(e+=n;e<i;e+=n){var a=t[e],h=t[e+1],u=Fn(s,o,a,h);u>r&&(r=u),s=a,o=h}return r}function xs(t,e,i,n,r){for(var s=0,o=i.length;s<o;++s){var a=i[s];r=Ms(t,e,a,n,r),e=a}return r}function ws(t,e,i,n,r,s,o,a,h,u,l){if(e==i)return u;var c,f;if(0===r){if((f=Fn(o,a,t[e],t[e+1]))<u){for(c=0;c<n;++c)h[c]=t[e+c];return h.length=n,f}return u}for(var p=l||[NaN,NaN],d=e+n;d<i;)if(_s(t,d-n,d,n,o,a,p),(f=Fn(o,a,p[0],p[1]))<u){for(u=f,c=0;c<n;++c)h[c]=p[c];h.length=n,d+=n}else d+=n*Math.max((Math.sqrt(f)-Math.sqrt(u))/r|0,1);if(s&&(_s(t,i-n,e,n,o,a,p),(f=Fn(o,a,p[0],p[1]))<u)){for(u=f,c=0;c<n;++c)h[c]=p[c];h.length=n}return u}function bs(t,e,i,n,r,s,o,a,h,u,l){for(var c=l||[NaN,NaN],f=0,p=i.length;f<p;++f){var d=i[f];u=ws(t,e,d,n,r,s,o,a,h,u,c),e=d}return u}function Es(t,e,i,n){for(var r=0,s=i.length;r<s;++r)for(var o=i[r],a=0;a<n;++a)t[e++]=o[a];return e}function Cs(t,e,i,n,r){for(var s=r||[],o=0,a=0,h=i.length;a<h;++a){var u=Es(t,e,i[a],n);s[o++]=u,e=u}return s.length=o,s}function Ss(t,e,i,n,r,s,o){var a=(i-e)/n;if(a<3){for(;e<i;e+=n)s[o++]=t[e],s[o++]=t[e+1];return o}var h=new Array(a);h[0]=1,h[a-1]=1;for(var u=[e,i-n],l=0;u.length>0;){for(var c=u.pop(),f=u.pop(),p=0,d=t[f],y=t[f+1],g=t[c],v=t[c+1],m=f+n;m<c;m+=n){var _=jn(t[m],t[m+1],d,y,g,v);_>p&&(l=m,p=_)}p>r&&(h[(l-e)/n]=1,f+n<l&&u.push(f,l),l+n<c&&u.push(l,c))}for(m=0;m<a;++m)h[m]&&(s[o++]=t[e+m*n],s[o++]=t[e+m*n+1]);return o}function Ps(t,e){return e*Math.round(t/e)}function Os(t,e,i,n,r,s,o){if(e==i)return o;var a,h,u=Ps(t[e],r),l=Ps(t[e+1],r);e+=n,s[o++]=u,s[o++]=l;do{if(a=Ps(t[e],r),h=Ps(t[e+1],r),(e+=n)==i)return s[o++]=a,s[o++]=h,o}while(a==u&&h==l);for(;e<i;){var c=Ps(t[e],r),f=Ps(t[e+1],r);if(e+=n,c!=a||f!=h){var p=a-u,d=h-l,y=c-u,g=f-l;p*g==d*y&&(p<0&&y<p||p==y||p>0&&y>p)&&(d<0&&g<d||d==g||d>0&&g>d)?(a=c,h=f):(s[o++]=a,s[o++]=h,u=a,l=h,a=c,h=f)}}return s[o++]=a,s[o++]=h,o}function Rs(t,e,i,n,r,s,o,a){for(var h=0,u=i.length;h<u;++h){var l=i[h];o=Os(t,e,l,n,r,s,o),a.push(o),e=l}return o}function Ns(t,e,i,n,r){var s;for(e+=n;e<i;e+=n)if(s=r(t.slice(e-n,e),t.slice(e,e+n)))return s;return!1}function Is(t,e,i,n,r){for(var s=void 0!==r?r:[],o=0,a=e;a<i;a+=n)s[o++]=t.slice(a,a+n);return s.length=o,s}function As(t,e,i,n,r){for(var s=void 0!==r?r:[],o=0,a=0,h=i.length;a<h;++a){var u=i[a];s[o++]=Is(t,e,u,n,s[o]),e=u}return s.length=o,s}function js(t,e,i,n,r,s,o){var a,h,u=(i-e)/n;if(1===u)a=e;else if(2===u)a=e,h=r;else if(0!==u){for(var l=t[e],c=t[e+1],f=0,p=[0],d=e+n;d<i;d+=n){var y=t[d],g=t[d+1];f+=Math.sqrt((y-l)*(y-l)+(g-c)*(g-c)),p.push(f),l=y,c=g}var v=r*f,m=function(t,e,i){for(var n,r,s=Yi,o=0,a=t.length,h=!1;o<a;)(r=+s(t[n=o+(a-o>>1)],e))<0?o=n+1:(a=n,h=!r);return h?o:~o}(p,v);m<0?(h=(v-p[-m-2])/(p[-m-1]-p[-m-2]),a=e+(-m-2)*n):a=e+m*n}var _=o>1?o:2,M=s||new Array(_);for(d=0;d<_;++d)M[d]=void 0===a?NaN:void 0===h?t[a+d]:Gn(t[a+d],t[a+n+d],h);return M}function Fs(t,e,i,n,r,s){if(i==e)return null;var o;if(r<t[e+n-1])return s?((o=t.slice(e,e+n))[n-1]=r,o):null;if(t[i-1]<r)return s?((o=t.slice(i-n,i))[n-1]=r,o):null;if(r==t[e+n-1])return t.slice(e,e+n);for(var a=e/n,h=i/n;a<h;){var u=a+h>>1;r<t[(u+1)*n-1]?h=u:a=u+1}var l=t[a*n-1];if(r==l)return t.slice((a-1)*n,(a-1)*n+n);var c=(r-l)/(t[(a+1)*n-1]-l);o=[];for(var f=0;f<n-1;++f)o.push(Gn(t[(a-1)*n+f],t[a*n+f],c));return o.push(r),o}function Ts(t,e,i,n,r){var s=function(t,e){var i;return(i=e(vn(t)))||(i=e(mn(t)))||(i=e(bn(t)))?i:(i=e(wn(t)))||!1}(r,(function(r){return!Ls(t,e,i,n,r[0],r[1])}));return!s}function Ls(t,e,i,n,r,s){for(var o=0,a=t[i-n],h=t[i-n+1];e<i;e+=n){var u=t[e],l=t[e+1];h<=s?l>s&&(u-a)*(s-h)-(r-a)*(l-h)>0&&o++:l<=s&&(u-a)*(s-h)-(r-a)*(l-h)<0&&o--,a=u,h=l}return 0!==o}function Gs(t,e,i,n,r,s){if(0===i.length)return!1;if(!Ls(t,e,i[0],n,r,s))return!1;for(var o=1,a=i.length;o<a;++o)if(Ls(t,i[o-1],i[o],n,r,s))return!1;return!0}function ks(t,e,i,n,r){var s=yn([1/0,1/0,-1/0,-1/0],t,e,i,n);return!!Cn(r,s)&&(!!hn(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]||Ns(t,e,i,n,(function(t,e){return function(t,e,i){var n=!1,r=ln(t,e),s=ln(t,i);if(1===r||1===s)n=!0;else{var o=t[0],a=t[1],h=t[2],u=t[3],l=e[0],c=e[1],f=i[0],p=i[1],d=(p-c)/(f-l),y=void 0,g=void 0;2&s&&!(2&r)&&(n=(y=f-(p-u)/d)>=o&&y<=h),n||!(4&s)||4&r||(n=(g=p-(f-h)*d)>=a&&g<=u),n||!(8&s)||8&r||(n=(y=f-(p-a)/d)>=o&&y<=h),n||!(16&s)||16&r||(n=(g=p-(f-o)*d)>=a&&g<=u)}return n}(r,t,e)})))}function qs(t,e,i,n,r){if(!function(t,e,i,n,r){return!!(ks(t,e,i,n,r)||Ls(t,e,i,n,r[0],r[1])||Ls(t,e,i,n,r[0],r[3])||Ls(t,e,i,n,r[2],r[1])||Ls(t,e,i,n,r[2],r[3]))}(t,e,i[0],n,r))return!1;if(1===i.length)return!0;for(var s=1,o=i.length;s<o;++s)if(Ts(t,i[s-1],i[s],n,r)&&!ks(t,i[s-1],i[s],n,r))return!1;return!0}var Ds=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Bs=function(t){function e(e,i){var n=t.call(this)||this;return n.flatMidpoint_=null,n.flatMidpointRevision_=-1,n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?n.setCoordinates(e,i):n.setFlatCoordinates(i,e),n}return Ds(e,t),e.prototype.appendCoordinate=function(t){this.flatCoordinates?Qi(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,i,n){return n<an(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ms(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ws(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,n))},e.prototype.forEachSegment=function(t){return Ns(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=hs&&this.layout!=us)return null;var i=void 0!==e&&e;return Fs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},e.prototype.getCoordinates=function(){return Is(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return js(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)},e.prototype.getLength=function(){return function(t,e,i,n){for(var r=t[e],s=t[e+1],o=0,a=e+n;a<i;a+=n){var h=t[a],u=t[a+1];o+=Math.sqrt((h-r)*(h-r)+(u-s)*(u-s)),r=h,s=u}return o}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=Ss(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,os)},e.prototype.getType=function(){return"LineString"},e.prototype.intersectsExtent=function(t){return ks(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Es(this.flatCoordinates,0,t,this.stride),this.changed()},e}(ms);const Us=Bs;function zs(t,e,i,n){for(var r=0,s=t[i-n],o=t[i-n+1];e<i;e+=n){var a=t[e],h=t[e+1];r+=o*a-s*h,s=a,o=h}return r/2}function Ws(t,e,i,n){for(var r=0,s=0,o=i.length;s<o;++s){var a=i[s];r+=zs(t,e,a,n),e=a}return r}var Xs=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ys=function(t){function e(e,i){var n=t.call(this)||this;return n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?n.setCoordinates(e,i):n.setFlatCoordinates(i,e),n}return Xs(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){return n<an(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ms(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ws(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.getArea=function(){return zs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return Is(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=Ss(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,os)},e.prototype.getType=function(){return"LinearRing"},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Es(this.flatCoordinates,0,t,this.stride),this.changed()},e}(ms);const Qs=Ys;var Vs=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Zs=function(t){function e(e,i,n){var r=t.call(this)||this;if(r.ends_=[],r.maxDelta_=-1,r.maxDeltaRevision_=-1,Array.isArray(e[0]))r.setCoordinates(e,i);else if(void 0!==i&&n)r.setFlatCoordinates(i,e),r.ends_=n;else{for(var s=r.getLayout(),o=e,a=[],h=[],u=0,l=o.length;u<l;++u){var c=o[u];0===u&&(s=c.getLayout()),Qi(a,c.getFlatCoordinates()),h.push(a.length)}r.setFlatCoordinates(s,a),r.ends_=h}return r}return Vs(e,t),e.prototype.appendLineString=function(t){this.flatCoordinates?Qi(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,i,n){return n<an(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(xs(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),bs(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,n))},e.prototype.getCoordinateAtM=function(t,e,i){if(this.layout!=hs&&this.layout!=us||0===this.flatCoordinates.length)return null;var n=void 0!==e&&e,r=void 0!==i&&i;return function(t,e,i,n,r,s,o){if(o)return Fs(t,e,i[i.length-1],n,r,s);var a;if(r<t[n-1])return s?((a=t.slice(0,n))[n-1]=r,a):null;if(t[t.length-1]<r)return s?((a=t.slice(t.length-n))[n-1]=r,a):null;for(var h=0,u=i.length;h<u;++h){var l=i[h];if(e!=l){if(r<t[e+n-1])return null;if(r<=t[l-1])return Fs(t,e,l,n,r,!1);e=l}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,n,r)},e.prototype.getCoordinates=function(){return As(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new Us(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,i=this.layout,n=[],r=0,s=0,o=e.length;s<o;++s){var a=e[s],h=new Us(t.slice(r,a),i);n.push(h),r=a}return n},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,i=0,n=this.ends_,r=this.stride,s=0,o=n.length;s<o;++s){var a=n[s];Qi(t,js(e,i,a,r,.5)),i=a}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=function(t,e,i,n,r,s,o,a){for(var h=0,u=i.length;h<u;++h){var l=i[h];o=Ss(t,e,l,n,r,s,o),a.push(o),e=l}return o}(this.flatCoordinates,0,this.ends_,this.stride,t,i,0,n),new e(i,os,n)},e.prototype.getType=function(){return"MultiLineString"},e.prototype.intersectsExtent=function(t){return function(t,e,i,n,r){for(var s=0,o=i.length;s<o;++s){if(ks(t,e,i[s],n,r))return!0;e=i[s]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=Cs(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(ms);const Hs=Zs;var Js=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ks=function(t){function e(e,i){var n=t.call(this)||this;return n.setCoordinates(e,i),n}return Js(e,t),e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,i,n){var r=this.flatCoordinates,s=Fn(t,e,r[0],r[1]);if(s<n){for(var o=this.stride,a=0;a<o;++a)i[a]=r[a];return i.length=o,s}return n},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return i=t,cn(n=(e=this.flatCoordinates)[0],r=e[1],n,r,i);var e,i,n,r},e.prototype.getType=function(){return"Point"},e.prototype.intersectsExtent=function(t){return un(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function(t,e,i,n){for(var r=0,s=i.length;r<s;++r)t[e++]=i[r];return e}(this.flatCoordinates,0,t,this.stride),this.changed()},e}(ms);const $s=Ks;var to=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),eo=function(t){function e(e,i){var n=t.call(this)||this;return i&&!Array.isArray(e[0])?n.setFlatCoordinates(i,e):n.setCoordinates(e,i),n}return to(e,t),e.prototype.appendPoint=function(t){this.flatCoordinates?Qi(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,i,n){if(n<an(this.getExtent(),t,e))return n;for(var r=this.flatCoordinates,s=this.stride,o=0,a=r.length;o<a;o+=s){var h=Fn(t,e,r[o],r[o+1]);if(h<n){n=h;for(var u=0;u<s;++u)i[u]=r[o+u];i.length=s}}return n},e.prototype.getCoordinates=function(){return Is(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new $s(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,i=this.stride,n=[],r=0,s=t.length;r<s;r+=i){var o=new $s(t.slice(r,r+i),e);n.push(o)}return n},e.prototype.getType=function(){return"MultiPoint"},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,i=this.stride,n=0,r=e.length;n<r;n+=i)if(un(t,e[n],e[n+1]))return!0;return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Es(this.flatCoordinates,0,t,this.stride),this.changed()},e}(ms);const io=eo;function no(t,e,i,n,r,s,o){for(var a,h,u,l,c,f,p,d=r[s+1],y=[],g=0,v=i.length;g<v;++g){var m=i[g];for(l=t[m-n],f=t[m-n+1],a=e;a<m;a+=n)c=t[a],p=t[a+1],(d<=f&&p<=d||f<=d&&d<=p)&&(u=(d-f)/(p-f)*(c-l)+l,y.push(u)),l=c,f=p}var _=NaN,M=-1/0;for(y.sort(Yi),l=y[0],a=1,h=y.length;a<h;++a){c=y[a];var x=Math.abs(c-l);x>M&&Gs(t,e,i,n,u=(l+c)/2,d)&&(_=u,M=x),l=c}return isNaN(_)&&(_=r[s]),o?(o.push(_,d,M),o):[_,d,M]}function ro(t,e,i,n){for(;e<i-n;){for(var r=0;r<n;++r){var s=t[e+r];t[e+r]=t[i-n+r],t[i-n+r]=s}e+=n,i-=n}}function so(t,e,i,n){for(var r=0,s=t[i-n],o=t[i-n+1];e<i;e+=n){var a=t[e],h=t[e+1];r+=(a-s)*(h+o),s=a,o=h}return 0===r?void 0:r>0}function oo(t,e,i,n,r){for(var s=void 0!==r&&r,o=0,a=i.length;o<a;++o){var h=i[o],u=so(t,e,h,n);if(0===o){if(s&&u||!s&&!u)return!1}else if(s&&!u||!s&&u)return!1;e=h}return!0}function ao(t,e,i,n,r){for(var s=void 0!==r&&r,o=0,a=i.length;o<a;++o){var h=i[o],u=so(t,e,h,n);(0===o?s&&u||!s&&!u:s&&!u||!s&&u)&&ro(t,e,h,n),e=h}return e}function ho(t,e,i,n,r){for(var s=0,o=i.length;s<o;++s)e=ao(t,e,i[s],n,r);return e}var uo=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),lo=function(t){function e(e,i,n){var r=t.call(this)||this;return r.ends_=[],r.flatInteriorPointRevision_=-1,r.flatInteriorPoint_=null,r.maxDelta_=-1,r.maxDeltaRevision_=-1,r.orientedRevision_=-1,r.orientedFlatCoordinates_=null,void 0!==i&&n?(r.setFlatCoordinates(i,e),r.ends_=n):r.setCoordinates(e,i),r}return uo(e,t),e.prototype.appendLinearRing=function(t){this.flatCoordinates?Qi(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,i,n){return n<an(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(xs(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),bs(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.containsXY=function(t,e){return Gs(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return Ws(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?ao(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,As(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=_n(this.getExtent());this.flatInteriorPoint_=no(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new $s(this.getFlatInteriorPoint(),hs)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new Qs(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.ends_,n=[],r=0,s=0,o=i.length;s<o;++s){var a=i[s],h=new Qs(e.slice(r,a),t);n.push(h),r=a}return n},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;oo(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=ao(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=Rs(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),i,0,n),new e(i,os,n)},e.prototype.getType=function(){return"Polygon"},e.prototype.intersectsExtent=function(t){return qs(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=Cs(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(ms);const co=lo;var fo=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),po=function(t){function e(e,i,n){var r=t.call(this)||this;if(r.endss_=[],r.flatInteriorPointsRevision_=-1,r.flatInteriorPoints_=null,r.maxDelta_=-1,r.maxDeltaRevision_=-1,r.orientedRevision_=-1,r.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){for(var s=r.getLayout(),o=e,a=[],h=[],u=0,l=o.length;u<l;++u){var c=o[u];0===u&&(s=c.getLayout());for(var f=a.length,p=c.getEnds(),d=0,y=p.length;d<y;++d)p[d]+=f;Qi(a,c.getFlatCoordinates()),h.push(p)}i=s,e=a,n=h}return void 0!==i&&n?(r.setFlatCoordinates(i,e),r.endss_=n):r.setCoordinates(e,i),r}return fo(e,t),e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var i=this.flatCoordinates.length;Qi(this.flatCoordinates,t.getFlatCoordinates());for(var n=0,r=(e=t.getEnds().slice()).length;n<r;++n)e[n]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,i=new Array(t),n=0;n<t;++n)i[n]=this.endss_[n].slice();var r=new e(this.flatCoordinates.slice(),this.layout,i);return r.applyProperties(this),r},e.prototype.closestPointXY=function(t,e,i,n){return n<an(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,i,n,r){for(var s=0,o=i.length;s<o;++s){var a=i[s];r=xs(t,e,a,n,r),e=a[a.length-1]}return r}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,i,n,r,s,o,a,h,u,l){for(var c=[NaN,NaN],f=0,p=i.length;f<p;++f){var d=i[f];u=bs(t,e,d,n,r,true,o,a,h,u,c),e=d[d.length-1]}return u}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,0,t,e,i,n))},e.prototype.containsXY=function(t,e){return function(t,e,i,n,r,s){if(0===i.length)return!1;for(var o=0,a=i.length;o<a;++o){var h=i[o];if(Gs(t,e,h,n,r,s))return!0;e=h[h.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return function(t,e,i,n){for(var r=0,s=0,o=i.length;s<o;++s){var a=i[s];r+=Ws(t,e,a,n),e=a[a.length-1]}return r}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?ho(e=this.getOrientedFlatCoordinates().slice(),0,this.endss_,this.stride,t):e=this.flatCoordinates,function(t,e,i,n,r){for(var s=[],o=0,a=0,h=i.length;a<h;++a){var u=i[a];s[o++]=As(t,e,u,n,s[o]),e=u[u.length-1]}return s.length=o,s}(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=function(t,e,i,n){for(var r=[],s=[1/0,1/0,-1/0,-1/0],o=0,a=i.length;o<a;++o){var h=i[o];s=pn(t,e,h[0],n),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=h[h.length-1]}return r}(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=function(t,e,i,n,r){for(var s=[],o=0,a=i.length;o<a;++o){var h=i[o];s=no(t,e,h,n,r,2*o,s),e=h[h.length-1]}return s}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new io(this.getFlatInteriorPoints().slice(),hs)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;!function(t,e,i,n,r){for(var s=0,o=i.length;s<o;++s){var a=i[s];if(!oo(t,e,a,n,undefined))return!1;a.length&&(e=a[a.length-1])}return!0}(t,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=ho(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=function(t,e,i,n,r,s,o,a){for(var h=0,u=i.length;h<u;++h){var l=i[h],c=[];o=Rs(t,e,l,n,r,s,o,c),a.push(c),e=l[l.length-1]}return o}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),i,0,n),new e(i,os,n)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var i=this.endss_[t-1];e=i[i.length-1]}var n=this.endss_[t].slice(),r=n[n.length-1];if(0!==e)for(var s=0,o=n.length;s<o;++s)n[s]-=e;return new co(this.flatCoordinates.slice(e,r),this.layout,n)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.endss_,n=[],r=0,s=0,o=i.length;s<o;++s){var a=i[s].slice(),h=a[a.length-1];if(0!==r)for(var u=0,l=a.length;u<l;++u)a[u]-=r;var c=new co(e.slice(r,h),t,a);n.push(c),r=h}return n},e.prototype.getType=function(){return"MultiPolygon"},e.prototype.intersectsExtent=function(t){return function(t,e,i,n,r){for(var s=0,o=i.length;s<o;++s){var a=i[s];if(qs(t,e,a,n,r))return!0;e=a[a.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=function(t,e,i,n,r){for(var s=r||[],o=0,a=0,h=i.length;a<h;++a){var u=Cs(t,e,i[a],n,s[o]);s[o++]=u,e=u[u.length-1]}return s.length=o,s}(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var n=i[i.length-1];this.flatCoordinates.length=0===n.length?0:n[n.length-1]}this.changed()},e}(ms);const yo=po,go=function(){function t(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return t.prototype.getReadOptions=function(t,e){var i;if(e){var n=e.dataProjection?hr(e.dataProjection):this.readProjection(t);e.extent&&n&&n.getUnits()===On.TILE_PIXELS&&(n=hr(n)).setWorldExtent(e.extent),i={dataProjection:n,featureProjection:e.featureProjection}}return this.adaptOptions(i)},t.prototype.adaptOptions=function(t){return Hi({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},t.prototype.getType=function(){return en()},t.prototype.readFeature=function(t,e){return en()},t.prototype.readFeatures=function(t,e){return en()},t.prototype.readGeometry=function(t,e){return en()},t.prototype.readProjection=function(t){return en()},t.prototype.writeFeature=function(t,e){return en()},t.prototype.writeFeatures=function(t,e){return en()},t.prototype.writeGeometry=function(t,e){return en()},t}();function vo(t,e,i){var n,r=i?hr(i.featureProjection):null,s=i?hr(i.dataProjection):null;if(n=r&&s&&!fr(r,s)?(e?t.clone():t).transform(e?r:s,e?s:r):t,e&&i&&void 0!==i.decimals){var o=Math.pow(10,i.decimals);n===t&&(n=t.clone()),n.applyTransform((function(t){for(var e=0,i=t.length;e<i;++e)t[e]=Math.round(t[e]*o)/o;return t}))}return n}function mo(t,e){var i=e?hr(e.featureProjection):null,n=e?hr(e.dataProjection):null;return i&&n&&!fr(i,n)?gr(t,n,i):t}function _o(t,e){return To().createElementNS(t,e)}function Mo(t,e){return xo(t,e,[]).join("")}function xo(t,e,i){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)e?i.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):i.push(t.nodeValue);else{var n=void 0;for(n=t.firstChild;n;n=n.nextSibling)xo(n,e,i)}return i}function wo(t){return"documentElement"in t}function bo(t){return(new DOMParser).parseFromString(t,"application/xml")}function Eo(t,e){return function(i,n){var r=t.call(void 0!==e?e:this,i,n);void 0!==r&&n[n.length-1].push(r)}}function Co(t,e){return function(i,n){var r=t.call(void 0!==e?e:this,i,n);void 0!==r&&(n[n.length-1]=r)}}function So(t,e){return function(i,n,r){t.call(void 0!==e?e:this,i,n,r),r[r.length-1].node.appendChild(i)}}function Po(t,e){var i=t;return function(t,n,r){var s=n[n.length-1].node,o=i;return void 0===o&&(o=r),_o(void 0!==e?e:s.namespaceURI,o)}}var Oo=Po();function Ro(t,e,i){var n,r,s=void 0!==i?i:{};for(n=0,r=t.length;n<r;++n)s[t[n]]=e;return s}function No(t,e,i,n){var r;for(r=e.firstElementChild;r;r=r.nextElementSibling){var s=t[r.namespaceURI];if(void 0!==s){var o=s[r.localName];void 0!==o&&o.call(n,r,i)}}}function Io(t,e,i,n,r){return n.push(t),No(e,i,n,r),n.pop()}function Ao(t,e,i,n,r,s,o){return r.push(t),function(t,e,i,n,r,s){for(var o,a,h=(void 0!==r?r:i).length,u=0;u<h;++u)void 0!==(o=i[u])&&void 0!==(a=e.call(void 0!==s?s:this,o,n,void 0!==r?r[u]:void 0))&&t[a.namespaceURI][a.localName].call(s,a,o,n)}(e,i,n,r,s,o),r.pop()}var jo=void 0,Fo=void 0;function To(){return void 0===Fo&&"undefined"!=typeof document&&(Fo=document.implementation.createDocument("","",null)),Fo}var Lo=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Go=function(t){function e(){var e=t.call(this)||this;return e.xmlSerializer_=(void 0===jo&&"undefined"!=typeof XMLSerializer&&(jo=new XMLSerializer),jo),e}return Lo(e,t),e.prototype.getType=function(){return"xml"},e.prototype.readFeature=function(t,e){if(t){if("string"==typeof t){var i=bo(t);return this.readFeatureFromDocument(i,e)}return wo(t)?this.readFeatureFromDocument(t,e):this.readFeatureFromNode(t,e)}return null},e.prototype.readFeatureFromDocument=function(t,e){var i=this.readFeaturesFromDocument(t,e);return i.length>0?i[0]:null},e.prototype.readFeatureFromNode=function(t,e){return null},e.prototype.readFeatures=function(t,e){if(t){if("string"==typeof t){var i=bo(t);return this.readFeaturesFromDocument(i,e)}return wo(t)?this.readFeaturesFromDocument(t,e):this.readFeaturesFromNode(t,e)}return[]},e.prototype.readFeaturesFromDocument=function(t,e){for(var i=[],n=t.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&Qi(i,this.readFeaturesFromNode(n,e));return i},e.prototype.readFeaturesFromNode=function(t,e){return en()},e.prototype.readGeometry=function(t,e){if(t){if("string"==typeof t){var i=bo(t);return this.readGeometryFromDocument(i,e)}return wo(t)?this.readGeometryFromDocument(t,e):this.readGeometryFromNode(t,e)}return null},e.prototype.readGeometryFromDocument=function(t,e){return null},e.prototype.readGeometryFromNode=function(t,e){return null},e.prototype.readProjection=function(t){if(t){if("string"==typeof t){var e=bo(t);return this.readProjectionFromDocument(e)}return wo(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}return null},e.prototype.readProjectionFromDocument=function(t){return this.dataProjection},e.prototype.readProjectionFromNode=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){var i=this.writeFeatureNode(t,e);return this.xmlSerializer_.serializeToString(i)},e.prototype.writeFeatureNode=function(t,e){return null},e.prototype.writeFeatures=function(t,e){var i=this.writeFeaturesNode(t,e);return this.xmlSerializer_.serializeToString(i)},e.prototype.writeFeaturesNode=function(t,e){return null},e.prototype.writeGeometry=function(t,e){var i=this.writeGeometryNode(t,e);return this.xmlSerializer_.serializeToString(i)},e.prototype.writeGeometryNode=function(t,e){return null},e}(go);var ko=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),qo="http://www.opengis.net/gml",Do=/^[\s\xa0]*$/,Bo=function(t){function e(e){var i=t.call(this)||this,n=e||{};return i.featureType=n.featureType,i.featureNS=n.featureNS,i.srsName=n.srsName,i.schemaLocation="",i.FEATURE_COLLECTION_PARSERS={},i.FEATURE_COLLECTION_PARSERS[i.namespace]={featureMember:Eo(i.readFeaturesInternal),featureMembers:Co(i.readFeaturesInternal)},i.supportedMediaTypes=["application/gml+xml"],i}return ko(e,t),e.prototype.readFeaturesInternal=function(t,e){var i=t.localName,n=null;if("FeatureCollection"==i)n=Io([],this.FEATURE_COLLECTION_PARSERS,t,e,this);else if("featureMembers"==i||"featureMember"==i||"member"==i){var r=e[0],s=r.featureType,o=r.featureNS;if(!s&&t.childNodes){s=[],o={};for(var a=0,h=t.childNodes.length;a<h;++a){var u=t.childNodes[a];if(1===u.nodeType){var l=u.nodeName.split(":").pop();if(-1===s.indexOf(l)){var c="",f=0,p=u.namespaceURI;for(var d in o){if(o[d]===p){c=d;break}++f}c||(o[c="p"+f]=p),s.push(c+":"+l)}}}"featureMember"!=i&&(r.featureType=s,r.featureNS=o)}if("string"==typeof o){var y=o;(o={}).p0=y}var g={},v=Array.isArray(s)?s:[s];for(var m in o){var _={};for(a=0,h=v.length;a<h;++a)(-1===v[a].indexOf(":")?"p0":v[a].split(":")[0])===m&&(_[v[a].split(":").pop()]="featureMembers"==i?Eo(this.readFeatureElement,this):Co(this.readFeatureElement,this));g[o[m]]=_}n=Io("featureMember"==i||"member"==i?void 0:[],g,t,e)}return null===n&&(n=[]),n},e.prototype.readGeometryElement=function(t,e){var i=e[0];i.srsName=t.firstElementChild.getAttribute("srsName"),i.srsDimension=t.firstElementChild.getAttribute("srsDimension");var n=Io(null,this.GEOMETRY_PARSERS,t,e,this);return n?Array.isArray(n)?mo(n,i):vo(n,!1,i):void 0},e.prototype.readFeatureElementInternal=function(t,e,i){for(var n,r={},s=t.firstElementChild;s;s=s.nextElementSibling){var o=void 0,a=s.localName;0===s.childNodes.length||1===s.childNodes.length&&(3===s.firstChild.nodeType||4===s.firstChild.nodeType)?(o=Mo(s,!1),Do.test(o)&&(o=void 0)):(i&&(o=this.readGeometryElement(s,e)),o?"boundedBy"!==a&&(n=a):o=this.readFeatureElementInternal(s,e,!1)),r[a]?(r[a]instanceof Array||(r[a]=[r[a]]),r[a].push(o)):r[a]=o;var h=s.attributes.length;if(h>0){r[a]={_content_:r[a]};for(var u=0;u<h;u++){var l=s.attributes[u].name;r[a][l]=s.attributes[u].value}}}if(i){var c=new ss(r);n&&c.setGeometryName(n);var f=t.getAttribute("fid")||function(t,e,i){return t.getAttributeNS(e,"id")||""}(t,this.namespace);return f&&c.setId(f),c}return r},e.prototype.readFeatureElement=function(t,e){return this.readFeatureElementInternal(t,e,!0)},e.prototype.readPoint=function(t,e){var i=this.readFlatCoordinatesFromNode(t,e);if(i)return new $s(i,as)},e.prototype.readMultiPoint=function(t,e){var i=Io([],this.MULTIPOINT_PARSERS,t,e,this);return i?new io(i):void 0},e.prototype.readMultiLineString=function(t,e){var i=Io([],this.MULTILINESTRING_PARSERS,t,e,this);if(i)return new Hs(i)},e.prototype.readMultiPolygon=function(t,e){var i=Io([],this.MULTIPOLYGON_PARSERS,t,e,this);if(i)return new yo(i)},e.prototype.pointMemberParser=function(t,e){No(this.POINTMEMBER_PARSERS,t,e,this)},e.prototype.lineStringMemberParser=function(t,e){No(this.LINESTRINGMEMBER_PARSERS,t,e,this)},e.prototype.polygonMemberParser=function(t,e){No(this.POLYGONMEMBER_PARSERS,t,e,this)},e.prototype.readLineString=function(t,e){var i=this.readFlatCoordinatesFromNode(t,e);return i?new Us(i,as):void 0},e.prototype.readFlatLinearRing=function(t,e){return Io(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)||void 0},e.prototype.readLinearRing=function(t,e){var i=this.readFlatCoordinatesFromNode(t,e);if(i)return new Qs(i,as)},e.prototype.readPolygon=function(t,e){var i=Io([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this);if(i&&i[0]){var n,r=i[0],s=[r.length],o=void 0;for(o=1,n=i.length;o<n;++o)Qi(r,i[o]),s.push(r.length);return new co(r,as,s)}},e.prototype.readFlatCoordinatesFromNode=function(t,e){return Io(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)},e.prototype.readGeometryFromNode=function(t,e){return this.readGeometryElement(t,[this.getReadOptions(t,e||{})])||null},e.prototype.readFeaturesFromNode=function(t,e){var i={featureType:this.featureType,featureNS:this.featureNS};return e&&Hi(i,this.getReadOptions(t,e)),this.readFeaturesInternal(t,[i])||[]},e.prototype.readProjectionFromNode=function(t){return hr(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))},e}(Go);Bo.prototype.namespace=qo,Bo.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}},Bo.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}},Bo.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}},Bo.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:Eo(Bo.prototype.pointMemberParser),pointMembers:Eo(Bo.prototype.pointMemberParser)}},Bo.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:Eo(Bo.prototype.lineStringMemberParser),lineStringMembers:Eo(Bo.prototype.lineStringMemberParser)}},Bo.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:Eo(Bo.prototype.polygonMemberParser),polygonMembers:Eo(Bo.prototype.polygonMemberParser)}},Bo.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:Eo(Bo.prototype.readFlatCoordinatesFromNode)}},Bo.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:Eo(Bo.prototype.readLineString)}},Bo.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:Eo(Bo.prototype.readPolygon)}},Bo.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:Co(Bo.prototype.readFlatLinearRing)}};const Uo=Bo;function zo(t,e){t.appendChild(To().createTextNode(e))}var Wo=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Xo={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},Yo=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this,n)||this).FEATURE_COLLECTION_PARSERS[qo].featureMember=Eo(i.readFeaturesInternal),i.schemaLocation=n.schemaLocation?n.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd",i}return Wo(e,t),e.prototype.readFlatCoordinates=function(t,e){var i=Mo(t,!1).replace(/^\s*|\s*$/g,""),n=e[0].srsName,r="enu";if(n){var s=hr(n);s&&(r=s.getAxisOrientation())}for(var o=i.trim().split(/\s+/),a=[],h=0,u=o.length;h<u;h++){var l=o[h].split(/,+/),c=parseFloat(l[0]),f=parseFloat(l[1]),p=3===l.length?parseFloat(l[2]):0;"en"===r.substr(0,2)?a.push(c,f,p):a.push(f,c,p)}return a},e.prototype.readBox=function(t,e){var i=Io([null],this.BOX_PARSERS_,t,e,this);return cn(i[1][0],i[1][1],i[1][3],i[1][4])},e.prototype.innerBoundaryIsParser=function(t,e){var i=Io(void 0,this.RING_PARSERS,t,e,this);i&&e[e.length-1].push(i)},e.prototype.outerBoundaryIsParser=function(t,e){var i=Io(void 0,this.RING_PARSERS,t,e,this);i&&(e[e.length-1][0]=i)},e.prototype.GEOMETRY_NODE_FACTORY_=function(t,e,i){var n,r=e[e.length-1],s=r.multiSurface,o=r.surface,a=r.multiCurve;return Array.isArray(t)?n="Envelope":"MultiPolygon"===(n=t.getType())&&!0===s?n="MultiSurface":"Polygon"===n&&!0===o?n="Surface":"MultiLineString"===n&&!0===a&&(n="MultiCurve"),_o("http://www.opengis.net/gml",n)},e.prototype.writeFeatureElement=function(t,e,i){var n=e.getId();n&&t.setAttribute("fid",n);var r=i[i.length-1],s=r.featureNS,o=e.getGeometryName();r.serializers||(r.serializers={},r.serializers[s]={});var a=[],h=[];if(e.hasProperties()){var u=e.getProperties();for(var l in u){var c=u[l];null!==c&&(a.push(l),h.push(c),l==o||"function"==typeof c.getSimplifiedGeometry?l in r.serializers[s]||(r.serializers[s][l]=So(this.writeGeometryElement,this)):l in r.serializers[s]||(r.serializers[s][l]=So(zo)))}}var f=Hi({},r);f.node=t,Ao(f,r.serializers,Po(void 0,s),h,i,a)},e.prototype.writeCurveOrLineString=function(t,e,i){var n=i[i.length-1].srsName;if("LineStringSegment"!==t.nodeName&&n&&t.setAttribute("srsName",n),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var r=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(r),this.writeCoordinates_(r,e,i)}else if("Curve"===t.nodeName){var s=_o(t.namespaceURI,"segments");t.appendChild(s),this.writeCurveSegments_(s,e,i)}},e.prototype.writeLineStringOrCurveMember=function(t,e,i){var n=this.GEOMETRY_NODE_FACTORY_(e,i);n&&(t.appendChild(n),this.writeCurveOrLineString(n,e,i))},e.prototype.writeMultiCurveOrLineString=function(t,e,i){var n=i[i.length-1],r=n.hasZ,s=n.srsName,o=n.curve;s&&t.setAttribute("srsName",s);var a=e.getLineStrings();Ao({node:t,hasZ:r,srsName:s,curve:o},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,i,void 0,this)},e.prototype.writeGeometryElement=function(t,e,i){var n,r=i[i.length-1],s=Hi({},r);s.node=t,n=Array.isArray(e)?mo(e,r):vo(e,!0,r),Ao(s,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[n],i,void 0,this)},e.prototype.createCoordinatesNode_=function(t){var e=_o(t,"coordinates");return e.setAttribute("decimal","."),e.setAttribute("cs",","),e.setAttribute("ts"," "),e},e.prototype.writeCoordinates_=function(t,e,i){for(var n=i[i.length-1],r=n.hasZ,s=n.srsName,o=e.getCoordinates(),a=o.length,h=new Array(a),u=0;u<a;++u){var l=o[u];h[u]=this.getCoords_(l,s,r)}zo(t,h.join(" "))},e.prototype.writeCurveSegments_=function(t,e,i){var n=_o(t.namespaceURI,"LineStringSegment");t.appendChild(n),this.writeCurveOrLineString(n,e,i)},e.prototype.writeSurfaceOrPolygon=function(t,e,i){var n=i[i.length-1],r=n.hasZ,s=n.srsName;if("PolygonPatch"!==t.nodeName&&s&&t.setAttribute("srsName",s),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var o=e.getLinearRings();Ao({node:t,hasZ:r,srsName:s},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,o,i,void 0,this)}else if("Surface"===t.nodeName){var a=_o(t.namespaceURI,"patches");t.appendChild(a),this.writeSurfacePatches_(a,e,i)}},e.prototype.RING_NODE_FACTORY_=function(t,e,i){var n=e[e.length-1],r=n.node,s=n.exteriorWritten;return void 0===s&&(n.exteriorWritten=!0),_o(r.namespaceURI,void 0!==s?"innerBoundaryIs":"outerBoundaryIs")},e.prototype.writeSurfacePatches_=function(t,e,i){var n=_o(t.namespaceURI,"PolygonPatch");t.appendChild(n),this.writeSurfaceOrPolygon(n,e,i)},e.prototype.writeRing=function(t,e,i){var n=_o(t.namespaceURI,"LinearRing");t.appendChild(n),this.writeLinearRing(n,e,i)},e.prototype.getCoords_=function(t,e,i){var n="enu";e&&(n=hr(e).getAxisOrientation());var r="en"===n.substr(0,2)?t[0]+","+t[1]:t[1]+","+t[0];return i&&(r+=","+(t[2]||0)),r},e.prototype.writePoint=function(t,e,i){var n=i[i.length-1],r=n.hasZ,s=n.srsName;s&&t.setAttribute("srsName",s);var o=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(o);var a=e.getCoordinates();zo(o,this.getCoords_(a,s,r))},e.prototype.writeMultiPoint=function(t,e,i){var n=i[i.length-1],r=n.hasZ,s=n.srsName;s&&t.setAttribute("srsName",s);var o=e.getPoints();Ao({node:t,hasZ:r,srsName:s},this.POINTMEMBER_SERIALIZERS,Po("pointMember"),o,i,void 0,this)},e.prototype.writePointMember=function(t,e,i){var n=_o(t.namespaceURI,"Point");t.appendChild(n),this.writePoint(n,e,i)},e.prototype.writeLinearRing=function(t,e,i){var n=i[i.length-1].srsName;n&&t.setAttribute("srsName",n);var r=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(r),this.writeCoordinates_(r,e,i)},e.prototype.writeMultiSurfaceOrPolygon=function(t,e,i){var n=i[i.length-1],r=n.hasZ,s=n.srsName,o=n.surface;s&&t.setAttribute("srsName",s);var a=e.getPolygons();Ao({node:t,hasZ:r,srsName:s,surface:o},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,i,void 0,this)},e.prototype.writeSurfaceOrPolygonMember=function(t,e,i){var n=this.GEOMETRY_NODE_FACTORY_(e,i);n&&(t.appendChild(n),this.writeSurfaceOrPolygon(n,e,i))},e.prototype.writeEnvelope=function(t,e,i){var n=i[i.length-1].srsName;n&&t.setAttribute("srsName",n);var r=[e[0]+" "+e[1],e[2]+" "+e[3]];Ao({node:t},this.ENVELOPE_SERIALIZERS,Oo,r,i,["lowerCorner","upperCorner"],this)},e.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(t,e,i){var n=e[e.length-1].node;return _o("http://www.opengis.net/gml",Xo[n.nodeName])},e}(Uo);Yo.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:Co(Yo.prototype.readFlatCoordinates)}},Yo.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:Yo.prototype.innerBoundaryIsParser,outerBoundaryIs:Yo.prototype.outerBoundaryIsParser}},Yo.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:Eo(Yo.prototype.readFlatCoordinates)}},Yo.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Co(Uo.prototype.readPoint),MultiPoint:Co(Uo.prototype.readMultiPoint),LineString:Co(Uo.prototype.readLineString),MultiLineString:Co(Uo.prototype.readMultiLineString),LinearRing:Co(Uo.prototype.readLinearRing),Polygon:Co(Uo.prototype.readPolygon),MultiPolygon:Co(Uo.prototype.readMultiPolygon),Box:Co(Yo.prototype.readBox)}},Yo.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:So(Yo.prototype.writeCurveOrLineString),MultiCurve:So(Yo.prototype.writeMultiCurveOrLineString),Point:So(Yo.prototype.writePoint),MultiPoint:So(Yo.prototype.writeMultiPoint),LineString:So(Yo.prototype.writeCurveOrLineString),MultiLineString:So(Yo.prototype.writeMultiCurveOrLineString),LinearRing:So(Yo.prototype.writeLinearRing),Polygon:So(Yo.prototype.writeSurfaceOrPolygon),MultiPolygon:So(Yo.prototype.writeMultiSurfaceOrPolygon),Surface:So(Yo.prototype.writeSurfaceOrPolygon),MultiSurface:So(Yo.prototype.writeMultiSurfaceOrPolygon),Envelope:So(Yo.prototype.writeEnvelope)}},Yo.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:So(Yo.prototype.writeLineStringOrCurveMember),curveMember:So(Yo.prototype.writeLineStringOrCurveMember)}},Yo.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:So(Yo.prototype.writeRing),innerBoundaryIs:So(Yo.prototype.writeRing)}},Yo.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:So(Yo.prototype.writePointMember)}},Yo.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:So(Yo.prototype.writeSurfaceOrPolygonMember),polygonMember:So(Yo.prototype.writeSurfaceOrPolygonMember)}},Yo.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:So(zo),upperCorner:So(zo)}};const Qo=Yo;var Vo=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const Zo=function(t){function e(e){var i=t.call(this)||this,n=e||{};return i.featureNS_="http://mapserver.gis.umn.edu/mapserver",i.gmlFormat_=new Qo,i.layers_=n.layers?n.layers:null,i}return Vo(e,t),e.prototype.getLayers=function(){return this.layers_},e.prototype.setLayers=function(t){this.layers_=t},e.prototype.readFeatures_=function(t,e){t.setAttribute("namespaceURI",this.featureNS_);var i,n=t.localName,r=[];if(0===t.childNodes.length)return r;if("msGMLOutput"==n)for(var s=0,o=t.childNodes.length;s<o;s++){var a=t.childNodes[s];if(a.nodeType===Node.ELEMENT_NODE){var h=a,u=e[0],l=h.localName.replace("_layer","");if(!this.layers_||(i=l,this.layers_.indexOf(i)>=0)){var c=l+"_feature";u.featureType=c,u.featureNS=this.featureNS_;var f={};f[c]=Eo(this.gmlFormat_.readFeatureElement,this.gmlFormat_);var p=Ro([u.featureNS,null],f);h.setAttribute("namespaceURI",this.featureNS_);var d=Io([],p,h,e,this.gmlFormat_);d&&Qi(r,d)}}}if("FeatureCollection"==n){var y=Io([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,[{}],this.gmlFormat_);y&&(r=y)}return r},e.prototype.readFeaturesFromNode=function(t,e){var i={};return e&&Hi(i,this.getReadOptions(t,e)),this.readFeatures_(t,[i])},e}(Go);var Ho=6378137,Jo=.0066943799901413165,Ko=484813681109536e-20,$o=Math.PI/2,ta=1e-10,ea=.017453292519943295,ia=57.29577951308232,na=Math.PI/4,ra=2*Math.PI,sa=3.14159265359,oa={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667};const aa={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var ha=/[\s_\-\/\(\)]/g;function ua(t,e){if(t[e])return t[e];for(var i,n=Object.keys(t),r=e.toLowerCase().replace(ha,""),s=-1;++s<n.length;)if((i=n[s]).toLowerCase().replace(ha,"")===r)return t[i]}function la(t){var e,i,n,r={},s=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var i=e.split("=");return i.push(!0),t[i[0].toLowerCase()]=i[1],t}),{}),o={proj:"projName",datum:"datumCode",rf:function(t){r.rf=parseFloat(t)},lat_0:function(t){r.lat0=t*ea},lat_1:function(t){r.lat1=t*ea},lat_2:function(t){r.lat2=t*ea},lat_ts:function(t){r.lat_ts=t*ea},lon_0:function(t){r.long0=t*ea},lon_1:function(t){r.long1=t*ea},lon_2:function(t){r.long2=t*ea},alpha:function(t){r.alpha=parseFloat(t)*ea},gamma:function(t){r.rectified_grid_angle=parseFloat(t)},lonc:function(t){r.longc=t*ea},x_0:function(t){r.x0=parseFloat(t)},y_0:function(t){r.y0=parseFloat(t)},k_0:function(t){r.k0=parseFloat(t)},k:function(t){r.k0=parseFloat(t)},a:function(t){r.a=parseFloat(t)},b:function(t){r.b=parseFloat(t)},r_a:function(){r.R_A=!0},zone:function(t){r.zone=parseInt(t,10)},south:function(){r.utmSouth=!0},towgs84:function(t){r.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){r.to_meter=parseFloat(t)},units:function(t){r.units=t;var e=ua(aa,t);e&&(r.to_meter=e.to_meter)},from_greenwich:function(t){r.from_greenwich=t*ea},pm:function(t){var e=ua(oa,t);r.from_greenwich=(e||parseFloat(t))*ea},nadgrids:function(t){"@null"===t?r.datumCode="none":r.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(r.axis=t)},approx:function(){r.approx=!0}};for(e in s)i=s[e],e in o?"function"==typeof(n=o[e])?n(i):r[n]=i:r[e]=i;return"string"==typeof r.datumCode&&"WGS84"!==r.datumCode&&(r.datumCode=r.datumCode.toLowerCase()),r}var ca=/\s/,fa=/[A-Za-z]/,pa=/[A-Za-z84]/,da=/[,\]]/,ya=/[\d\.E\-\+]/;function ga(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function va(t,e,i){Array.isArray(e)&&(i.unshift(e),e=null);var n=e?{}:t,r=i.reduce((function(t,e){return ma(e,t),t}),n);e&&(t[e]=r)}function ma(t,e){if(Array.isArray(t)){var i=t.shift();if("PARAMETER"===i&&(i=t.shift()),1===t.length)return Array.isArray(t[0])?(e[i]={},void ma(t[0],e[i])):void(e[i]=t[0]);if(t.length)if("TOWGS84"!==i){if("AXIS"===i)return i in e||(e[i]=[]),void e[i].push(t);var n;switch(Array.isArray(i)||(e[i]={}),i){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[i]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&ma(t[2],e[i]));case"SPHEROID":case"ELLIPSOID":return e[i]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&ma(t[3],e[i]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void va(e,i,t);default:for(n=-1;++n<t.length;)if(!Array.isArray(t[n]))return ma(t,e[i]);return va(e,i,t)}}else e[i]=t;else e[i]=!0}else e[t]=!0}function _a(t){return.017453292519943295*t}function Ma(t){var e=new ga(t).output(),i=e.shift(),n=e.shift();e.unshift(["name",n]),e.unshift(["type",i]);var r={};return ma(e,r),function(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",i=0,n=t.AXIS.length;i<n;++i){var r=[t.AXIS[i][0].toLowerCase(),t.AXIS[i][1].toLowerCase()];-1!==r[0].indexOf("north")||("y"===r[0]||"lat"===r[0])&&"north"===r[1]?e+="n":-1!==r[0].indexOf("south")||("y"===r[0]||"lat"===r[0])&&"south"===r[1]?e+="s":-1!==r[0].indexOf("east")||("x"===r[0]||"lon"===r[0])&&"east"===r[1]?e+="e":-1===r[0].indexOf("west")&&("x"!==r[0]&&"lon"!==r[0]||"west"!==r[1])||(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var s=t.GEOGCS;function o(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(s=t),s&&(s.DATUM?t.datumCode=s.DATUM.name.toLowerCase():t.datumCode=s.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(t.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=s.DATUM.SPHEROID.a,t.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(t.datum_params=s.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",_a],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",_a],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",_a],["lat0","latitude_of_origin",_a],["lat0","standard_parallel_1",_a],["lat1","standard_parallel_1",_a],["lat2","standard_parallel_2",_a],["azimuth","Azimuth"],["alpha","azimuth",_a],["srsCode","name"]].forEach((function(e){return function(t,e){var i=e[0],n=e[1];!(i in t)&&n in t&&(t[i]=t[n],3===e.length&&(t[i]=e[2](t[i])))}(t,e)})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=_a(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(r),r}function xa(t){var e=this;if(2===arguments.length){var i=arguments[1];"string"==typeof i?"+"===i.charAt(0)?xa[t]=la(arguments[1]):xa[t]=Ma(arguments[1]):xa[t]=i}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?xa.apply(e,t):xa(t)}));if("string"==typeof t){if(t in xa)return xa[t]}else"EPSG"in t?xa["EPSG:"+t.EPSG]=t:"ESRI"in t?xa["ESRI:"+t.ESRI]=t:"IAU2000"in t?xa["IAU2000:"+t.IAU2000]=t:console.log(t);return}}ga.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;ca.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case 1:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},ga.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(da.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},ga.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},ga.prototype.number=function(t){if(!ya.test(t)){if(da.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},ga.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},ga.prototype.keyword=function(t){if(pa.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=1)}if(!da.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},ga.prototype.neutral=function(t){if(fa.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(ya.test(t))return this.word=t,void(this.state=3);if(!da.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},ga.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)},function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(xa);const wa=xa;var ba=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],Ea=["3857","900913","3785","102113"];function Ca(t,e){var i,n;if(t=t||{},!e)return t;for(n in e)void 0!==(i=e[n])&&(t[n]=i);return t}function Sa(t,e,i){var n=t*e;return i/Math.sqrt(1-n*n)}function Pa(t){return t<0?-1:1}function Oa(t){return Math.abs(t)<=sa?t:t-Pa(t)*ra}function Ra(t,e,i){var n=t*i,r=.5*t;return n=Math.pow((1-n)/(1+n),r),Math.tan(.5*($o-e))/n}function Na(t,e){for(var i,n,r=.5*t,s=$o-2*Math.atan(e),o=0;o<=15;o++)if(i=t*Math.sin(s),s+=n=$o-2*Math.atan(e*Math.pow((1-i)/(1+i),r))-s,Math.abs(n)<=1e-10)return s;return-9999}function Ia(t){return t}var Aa=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Sa(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,i,n=t.x,r=t.y;if(r*ia>90&&r*ia<-90&&n*ia>180&&n*ia<-180)return null;if(Math.abs(Math.abs(r)-$o)<=ta)return null;if(this.sphere)e=this.x0+this.a*this.k0*Oa(n-this.long0),i=this.y0+this.a*this.k0*Math.log(Math.tan(na+.5*r));else{var s=Math.sin(r),o=Ra(this.e,r,s);e=this.x0+this.a*this.k0*Oa(n-this.long0),i=this.y0-this.a*this.k0*Math.log(o)}return t.x=e,t.y=i,t},inverse:function(t){var e,i,n=t.x-this.x0,r=t.y-this.y0;if(this.sphere)i=$o-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var s=Math.exp(-r/(this.a*this.k0));if(-9999===(i=Na(this.e,s)))return null}return e=Oa(this.long0+n/(this.a*this.k0)),t.x=e,t.y=i,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:Ia,inverse:Ia,names:["longlat","identity"]}],ja={},Fa=[];function Ta(t,e){var i=Fa.length;return t.names?(Fa[i]=t,t.names.forEach((function(t){ja[t.toLowerCase()]=i})),this):(console.log(e),!0)}const La={start:function(){Aa.forEach(Ta)},add:Ta,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==ja[e]&&Fa[ja[e]]?Fa[ja[e]]:void 0}};var Ga={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},ka=Ga.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Ga.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var qa={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};var Da={};function Ba(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:Da[t]||null,isNull:!1}}function Ua(t){return t/3600*Math.PI/180}function za(t,e,i){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,i)))}function Wa(t){return t.map((function(t){return[Ua(t.longitudeShift),Ua(t.latitudeShift)]}))}function Xa(t,e,i){return{name:za(t,e+8,e+16).trim(),parent:za(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,i),upperLatitude:t.getFloat64(e+88,i),lowerLongitude:t.getFloat64(e+104,i),upperLongitude:t.getFloat64(e+120,i),latitudeInterval:t.getFloat64(e+136,i),longitudeInterval:t.getFloat64(e+152,i),gridNodeCount:t.getInt32(e+168,i)}}function Ya(t,e,i,n){for(var r=e+176,s=[],o=0;o<i.gridNodeCount;o++){var a={latitudeShift:t.getFloat32(r+16*o,n),longitudeShift:t.getFloat32(r+16*o+4,n),latitudeAccuracy:t.getFloat32(r+16*o+8,n),longitudeAccuracy:t.getFloat32(r+16*o+12,n)};s.push(a)}return s}function Qa(t,e){if(!(this instanceof Qa))return new Qa(t);e=e||function(t){if(t)throw t};var i=function(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in wa}(t))return wa[t];if(function(t){return ba.some((function(e){return t.indexOf(e)>-1}))}(t)){var e=Ma(t);if(function(t){var e=ua(t,"authority");if(e){var i=ua(e,"epsg");return i&&Ea.indexOf(i)>-1}}(e))return wa["EPSG:3857"];var i=function(t){var e=ua(t,"extension");if(e)return ua(e,"proj4")}(e);return i?la(i):e}return function(t){return"+"===t[0]}(t)?la(t):void 0}(t);if("object"==typeof i){var n=Qa.projections.get(i.projName);if(n){if(i.datumCode&&"none"!==i.datumCode){var r=ua(qa,i.datumCode);r&&(i.datum_params=i.datum_params||(r.towgs84?r.towgs84.split(","):null),i.ellps=r.ellipse,i.datumName=r.datumName?r.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84",i.lat1=i.lat1||i.lat0;var s,o,a,h,u,l,c=function(t,e,i,n,r){if(!t){var s=ua(Ga,n);s||(s=ka),t=s.a,e=s.b,i=s.rf}return i&&!e&&(e=(1-1/i)*t),(0===i||Math.abs(t-e)<ta)&&(r=!0,e=t),{a:t,b:e,rf:i,sphere:r}}(i.a,i.b,i.rf,i.ellps,i.sphere),f=(s=c.a,o=c.b,c.rf,u=((a=s*s)-(h=o*o))/a,l=0,i.R_A?(a=(s*=1-u*(.16666666666666666+u*(.04722222222222222+.022156084656084655*u)))*s,u=0):l=Math.sqrt(u),{es:u,e:l,ep2:(a-h)/h}),p=function(t){return void 0===t?null:t.split(",").map(Ba)}(i.nadgrids),d=i.datum||function(t,e,i,n,r,s,o){var a={};return a.datum_type=void 0===t||"none"===t?5:4,e&&(a.datum_params=e.map(parseFloat),0===a.datum_params[0]&&0===a.datum_params[1]&&0===a.datum_params[2]||(a.datum_type=1),a.datum_params.length>3&&(0===a.datum_params[3]&&0===a.datum_params[4]&&0===a.datum_params[5]&&0===a.datum_params[6]||(a.datum_type=2,a.datum_params[3]*=Ko,a.datum_params[4]*=Ko,a.datum_params[5]*=Ko,a.datum_params[6]=a.datum_params[6]/1e6+1))),o&&(a.datum_type=3,a.grids=o),a.a=i,a.b=n,a.es=r,a.ep2=s,a}(i.datumCode,i.datum_params,c.a,c.b,f.es,f.ep2,p);Ca(this,i),Ca(this,n),this.a=c.a,this.b=c.b,this.rf=c.rf,this.sphere=c.sphere,this.es=f.es,this.e=f.e,this.ep2=f.ep2,this.datum=d,this.init(),e(null,this)}else e(t)}else e(t)}Qa.projections=La,Qa.projections.start();const Va=Qa;function Za(t,e,i){var n,r,s,o,a=t.x,h=t.y,u=t.z?t.z:0;if(h<-$o&&h>-1.001*$o)h=-$o;else if(h>$o&&h<1.001*$o)h=$o;else{if(h<-$o)return{x:-1/0,y:-1/0,z:t.z};if(h>$o)return{x:1/0,y:1/0,z:t.z}}return a>Math.PI&&(a-=2*Math.PI),r=Math.sin(h),o=Math.cos(h),s=r*r,{x:((n=i/Math.sqrt(1-e*s))+u)*o*Math.cos(a),y:(n+u)*o*Math.sin(a),z:(n*(1-e)+u)*r}}function Ha(t,e,i,n){var r,s,o,a,h,u,l,c,f,p,d,y,g,v,m,_=t.x,M=t.y,x=t.z?t.z:0;if(r=Math.sqrt(_*_+M*M),s=Math.sqrt(_*_+M*M+x*x),r/i<1e-12){if(v=0,s/i<1e-12)return m=-n,{x:t.x,y:t.y,z:t.z}}else v=Math.atan2(M,_);o=x/s,c=(a=r/s)*(1-e)*(h=1/Math.sqrt(1-e*(2-e)*a*a)),f=o*h,g=0;do{g++,u=e*(l=i/Math.sqrt(1-e*f*f))/(l+(m=r*c+x*f-l*(1-e*f*f))),y=(d=o*(h=1/Math.sqrt(1-u*(2-u)*a*a)))*c-(p=a*(1-u)*h)*f,c=p,f=d}while(y*y>1e-24&&g<30);return{x:v,y:Math.atan(d/Math.abs(p)),z:m}}function Ja(t){return 1===t||2===t}function Ka(t,e,i){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;for(var n={x:-i.x,y:i.y},r={x:Number.NaN,y:Number.NaN},s=[],o=0;o<t.grids.length;o++){var a=t.grids[o];if(s.push(a.name),a.isNull){r=n;break}if(a.mandatory,null!==a.grid){var h=a.grid.subgrids[0],u=(Math.abs(h.del[1])+Math.abs(h.del[0]))/1e4,l=h.ll[0]-u,c=h.ll[1]-u,f=h.ll[0]+(h.lim[0]-1)*h.del[0]+u,p=h.ll[1]+(h.lim[1]-1)*h.del[1]+u;if(!(c>n.y||l>n.x||p<n.y||f<n.x||(r=$a(n,e,h),isNaN(r.x))))break}else if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1}return isNaN(r.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*ia+" "+n.y*ia+" tried: '"+s+"'"),-1):(i.x=-r.x,i.y=r.y,0)}function $a(t,e,i){var n={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return n;var r={x:t.x,y:t.y};r.x-=i.ll[0],r.y-=i.ll[1],r.x=Oa(r.x-Math.PI)+Math.PI;var s=th(r,i);if(e){if(isNaN(s.x))return n;s.x=r.x-s.x,s.y=r.y-s.y;var o,a,h=9;do{if(a=th(s,i),isNaN(a.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}o={x:r.x-(a.x+s.x),y:r.y-(a.y+s.y)},s.x+=o.x,s.y+=o.y}while(h--&&Math.abs(o.x)>1e-12&&Math.abs(o.y)>1e-12);if(h<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=Oa(s.x+i.ll[0]),n.y=s.y+i.ll[1]}else isNaN(s.x)||(n.x=t.x+s.x,n.y=t.y+s.y);return n}function th(t,e){var i,n={x:t.x/e.del[0],y:t.y/e.del[1]},r=Math.floor(n.x),s=Math.floor(n.y),o=n.x-1*r,a=n.y-1*s,h={x:Number.NaN,y:Number.NaN};if(r<0||r>=e.lim[0])return h;if(s<0||s>=e.lim[1])return h;i=s*e.lim[0]+r;var u=e.cvs[i][0],l=e.cvs[i][1];i++;var c=e.cvs[i][0],f=e.cvs[i][1];i+=e.lim[0];var p=e.cvs[i][0],d=e.cvs[i][1];i--;var y=e.cvs[i][0],g=e.cvs[i][1],v=o*a,m=o*(1-a),_=(1-o)*(1-a),M=(1-o)*a;return h.x=_*u+m*c+M*y+v*p,h.y=_*l+m*f+M*g+v*d,h}function eh(t,e,i){var n,r,s,o=i.x,a=i.y,h=i.z||0,u={};for(s=0;s<3;s++)if(!e||2!==s||void 0!==i.z)switch(0===s?(n=o,r=-1!=="ew".indexOf(t.axis[s])?"x":"y"):1===s?(n=a,r=-1!=="ns".indexOf(t.axis[s])?"y":"x"):(n=h,r="z"),t.axis[s]){case"e":case"n":u[r]=n;break;case"w":case"s":u[r]=-n;break;case"u":void 0!==i[r]&&(u.z=n);break;case"d":void 0!==i[r]&&(u.z=-n);break;default:return null}return u}function ih(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function nh(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function rh(t,e,i,n){var r;if(Array.isArray(i)&&(i=ih(i)),function(t){nh(t.x),nh(t.y)}(i),t.datum&&e.datum&&function(t,e){return(1===t.datum.datum_type||2===t.datum.datum_type)&&"WGS84"!==e.datumCode||(1===e.datum.datum_type||2===e.datum.datum_type)&&"WGS84"!==t.datumCode}(t,e)&&(i=rh(t,r=new Va("WGS84"),i,n),t=r),n&&"enu"!==t.axis&&(i=eh(t,!1,i)),"longlat"===t.projName)i={x:i.x*ea,y:i.y*ea,z:i.z||0};else if(t.to_meter&&(i={x:i.x*t.to_meter,y:i.y*t.to_meter,z:i.z||0}),!(i=t.inverse(i)))return;if(t.from_greenwich&&(i.x+=t.from_greenwich),i=function(t,e,i){if(function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(1===t.datum_type?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:2!==t.datum_type||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e))return i;if(5===t.datum_type||5===e.datum_type)return i;var n=t.a,r=t.es;if(3===t.datum_type){if(0!==Ka(t,!1,i))return;n=Ho,r=Jo}var s=e.a,o=e.b,a=e.es;return 3===e.datum_type&&(s=Ho,o=6356752.314,a=Jo),r!==a||n!==s||Ja(t.datum_type)||Ja(e.datum_type)?(i=Za(i,r,n),Ja(t.datum_type)&&(i=function(t,e,i){if(1===e)return{x:t.x+i[0],y:t.y+i[1],z:t.z+i[2]};if(2===e){var n=i[0],r=i[1],s=i[2],o=i[3],a=i[4],h=i[5],u=i[6];return{x:u*(t.x-h*t.y+a*t.z)+n,y:u*(h*t.x+t.y-o*t.z)+r,z:u*(-a*t.x+o*t.y+t.z)+s}}}(i,t.datum_type,t.datum_params)),Ja(e.datum_type)&&(i=function(t,e,i){if(1===e)return{x:t.x-i[0],y:t.y-i[1],z:t.z-i[2]};if(2===e){var n=i[0],r=i[1],s=i[2],o=i[3],a=i[4],h=i[5],u=i[6],l=(t.x-n)/u,c=(t.y-r)/u,f=(t.z-s)/u;return{x:l+h*c-a*f,y:-h*l+c+o*f,z:a*l-o*c+f}}}(i,e.datum_type,e.datum_params)),i=Ha(i,a,s,o),3!==e.datum_type||0===Ka(e,!0,i)?i:void 0):i}(t.datum,e.datum,i))return e.from_greenwich&&(i={x:i.x-e.from_greenwich,y:i.y,z:i.z||0}),"longlat"===e.projName?i={x:i.x*ia,y:i.y*ia,z:i.z||0}:(i=e.forward(i),e.to_meter&&(i={x:i.x/e.to_meter,y:i.y/e.to_meter,z:i.z||0})),n&&"enu"!==e.axis?eh(e,!0,i):i}var sh=Va("WGS84");function oh(t,e,i,n){var r,s,o;return Array.isArray(i)?(r=rh(t,e,i,n)||{x:NaN,y:NaN},i.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof r.z?[r.x,r.y,r.z].concat(i.splice(3)):[r.x,r.y,i[2]].concat(i.splice(3)):[r.x,r.y].concat(i.splice(2)):[r.x,r.y]):(s=rh(t,e,i,n),2===(o=Object.keys(i)).length||o.forEach((function(n){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===n||"y"===n||"z"===n)return}else if("x"===n||"y"===n)return;s[n]=i[n]})),s)}function ah(t){return t instanceof Va?t:t.oProj?t.oProj:Va(t)}const hh=function(t,e,i){t=ah(t);var n,r=!1;return void 0===e?(e=t,t=sh,r=!0):(void 0!==e.x||Array.isArray(e))&&(i=e,e=t,t=sh,r=!0),e=ah(e),i?oh(t,e,i):(n={forward:function(i,n){return oh(t,e,i,n)},inverse:function(i,n){return oh(e,t,i,n)}},r&&(n.oProj=e),n)};var uh="AJSAJS",lh="AFAFAF",ch=65,fh=73,ph=79;const dh={forward:yh,inverse:function(t){var e=_h(xh(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},toPoint:gh};function yh(t,e){return e=e||5,function(t,e){var i,n,r,s,o,a,h,u,l,c,f,p="00000"+t.easting,d="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(l=t.easting,c=t.northing,f=Mh(t.zoneNumber),i=Math.floor(l/1e5),n=Math.floor(c/1e5)%20,s=uh.charCodeAt(r=f-1),o=lh.charCodeAt(r),u=!1,(a=s+i-1)>90&&(a=a-90+ch-1,u=!0),(a===fh||s<fh&&a>fh||(a>fh||s<fh)&&u)&&a++,(a===ph||s<ph&&a>ph||(a>ph||s<ph)&&u)&&++a===fh&&a++,a>90&&(a=a-90+ch-1),(h=o+n)>86?(h=h-86+ch-1,u=!0):u=!1,(h===fh||o<fh&&h>fh||(h>fh||o<fh)&&u)&&h++,(h===ph||o<ph&&h>ph||(h>ph||o<ph)&&u)&&++h===fh&&h++,h>86&&(h=h-86+ch-1),String.fromCharCode(a)+String.fromCharCode(h))+p.substr(p.length-5,e)+d.substr(d.length-5,e)}(function(t){var e,i,n,r,s,o,a,h=t.lat,u=t.lon,l=6378137,c=.00669438,f=.9996,p=vh(h),d=vh(u);a=Math.floor((u+180)/6)+1,180===u&&(a=60),h>=56&&h<64&&u>=3&&u<12&&(a=32),h>=72&&h<84&&(u>=0&&u<9?a=31:u>=9&&u<21?a=33:u>=21&&u<33?a=35:u>=33&&u<42&&(a=37)),o=vh(6*(a-1)-180+3),e=.006739496752268451,i=l/Math.sqrt(1-c*Math.sin(p)*Math.sin(p)),n=Math.tan(p)*Math.tan(p),r=e*Math.cos(p)*Math.cos(p);var y,g,v=f*i*((s=Math.cos(p)*(d-o))+(1-n+r)*s*s*s/6+(5-18*n+n*n+72*r-58*e)*s*s*s*s*s/120)+5e5,m=f*(l*(.9983242984503243*p-.002514607064228144*Math.sin(2*p)+2639046602129982e-21*Math.sin(4*p)-3.418046101696858e-9*Math.sin(6*p))+i*Math.tan(p)*(s*s/2+(5-n+9*r+4*r*r)*s*s*s*s/24+(61-58*n+n*n+600*r-2.2240339282485886)*s*s*s*s*s*s/720));return h<0&&(m+=1e7),{northing:Math.round(m),easting:Math.round(v),zoneNumber:a,zoneLetter:(y=h,g="Z",84>=y&&y>=72?g="X":72>y&&y>=64?g="W":64>y&&y>=56?g="V":56>y&&y>=48?g="U":48>y&&y>=40?g="T":40>y&&y>=32?g="S":32>y&&y>=24?g="R":24>y&&y>=16?g="Q":16>y&&y>=8?g="P":8>y&&y>=0?g="N":0>y&&y>=-8?g="M":-8>y&&y>=-16?g="L":-16>y&&y>=-24?g="K":-24>y&&y>=-32?g="J":-32>y&&y>=-40?g="H":-40>y&&y>=-48?g="G":-48>y&&y>=-56?g="F":-56>y&&y>=-64?g="E":-64>y&&y>=-72?g="D":-72>y&&y>=-80&&(g="C"),g)}}({lat:t[1],lon:t[0]}),e)}function gh(t){var e=_h(xh(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function vh(t){return t*(Math.PI/180)}function mh(t){return t/Math.PI*180}function _h(t){var e=t.northing,i=t.easting,n=t.zoneLetter,r=t.zoneNumber;if(r<0||r>60)return null;var s,o,a,h,u,l,c,f,p,d=.9996,y=6378137,g=.00669438,v=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),m=i-5e5,_=e;n<"N"&&(_-=1e7),c=6*(r-1)-180+3,s=.006739496752268451,p=(f=_/d/6367449.145945056)+(3*v/2-27*v*v*v/32)*Math.sin(2*f)+(21*v*v/16-55*v*v*v*v/32)*Math.sin(4*f)+151*v*v*v/96*Math.sin(6*f),o=y/Math.sqrt(1-g*Math.sin(p)*Math.sin(p)),a=Math.tan(p)*Math.tan(p),h=s*Math.cos(p)*Math.cos(p),u=.99330562*y/Math.pow(1-g*Math.sin(p)*Math.sin(p),1.5),l=m/(o*d);var M=p-o*Math.tan(p)/u*(l*l/2-(5+3*a+10*h-4*h*h-9*s)*l*l*l*l/24+(61+90*a+298*h+45*a*a-1.6983531815716497-3*h*h)*l*l*l*l*l*l/720);M=mh(M);var x,w=(l-(1+2*a+h)*l*l*l/6+(5-2*h+28*a-3*h*h+8*s+24*a*a)*l*l*l*l*l/120)/Math.cos(p);if(w=c+mh(w),t.accuracy){var b=_h({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});x={top:b.lat,right:b.lon,bottom:M,left:w}}else x={lat:M,lon:w};return x}function Mh(t){var e=t%6;return 0===e&&(e=6),e}function xh(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,i=t.length,n=null,r="",s=0;!/[A-Z]/.test(e=t.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+t;r+=e,s++}var o=parseInt(r,10);if(0===s||s+3>i)throw"MGRSPoint bad conversion from: "+t;var a=t.charAt(s++);if(a<="A"||"B"===a||"Y"===a||a>="Z"||"I"===a||"O"===a)throw"MGRSPoint zone letter "+a+" not handled: "+t;n=t.substring(s,s+=2);for(var h=Mh(o),u=function(t,e){for(var i=uh.charCodeAt(e-1),n=1e5,r=!1;i!==t.charCodeAt(0);){if(++i===fh&&i++,i===ph&&i++,i>90){if(r)throw"Bad character: "+t;i=ch,r=!0}n+=1e5}return n}(n.charAt(0),h),l=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var i=lh.charCodeAt(e-1),n=0,r=!1;i!==t.charCodeAt(0);){if(++i===fh&&i++,i===ph&&i++,i>86){if(r)throw"Bad character: "+t;i=ch,r=!0}n+=1e5}return n}(n.charAt(1),h);l<wh(a);)l+=2e6;var c=i-s;if(c%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var f,p,d,y=c/2,g=0,v=0;return y>0&&(f=1e5/Math.pow(10,y),p=t.substring(s,s+y),g=parseFloat(p)*f,d=t.substring(s+y),v=parseFloat(d)*f),{easting:g+u,northing:v+l,zoneLetter:a,zoneNumber:o,accuracy:f}}function wh(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function bh(t,e,i){if(!(this instanceof bh))return new bh(t,e,i);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var n=t.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=t,this.y=e,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}bh.fromMGRS=function(t){return new bh(gh(t))},bh.prototype.toMGRS=function(t){return yh([this.x,this.y],t)};const Eh=bh;var Ch=.046875,Sh=.01953125,Ph=.01068115234375;function Oh(t){var e=[];e[0]=1-t*(.25+t*(Ch+t*(Sh+t*Ph))),e[1]=t*(.75-t*(Ch+t*(Sh+t*Ph)));var i=t*t;return e[2]=i*(.46875-t*(.013020833333333334+.007120768229166667*t)),i*=t,e[3]=i*(.3645833333333333-.005696614583333333*t),e[4]=i*t*.3076171875,e}function Rh(t,e,i,n){return i*=e,e*=e,n[0]*t-i*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))}function Nh(t,e,i){for(var n=1/(1-e),r=t,s=20;s;--s){var o=Math.sin(r),a=1-e*o*o;if(r-=a=(Rh(r,o,Math.cos(r),i)-t)*(a*Math.sqrt(a))*n,Math.abs(a)<ta)return r}return r}const Ih={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Oh(this.es),this.ml0=Rh(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,i,n,r=t.x,s=t.y,o=Oa(r-this.long0),a=Math.sin(s),h=Math.cos(s);if(this.es){var u=h*o,l=Math.pow(u,2),c=this.ep2*Math.pow(h,2),f=Math.pow(c,2),p=Math.abs(h)>ta?Math.tan(s):0,d=Math.pow(p,2),y=Math.pow(d,2);e=1-this.es*Math.pow(a,2),u/=Math.sqrt(e);var g=Rh(s,a,h,this.en);i=this.a*(this.k0*u*(1+l/6*(1-d+c+l/20*(5-18*d+y+14*c-58*d*c+l/42*(61+179*y-y*d-479*d)))))+this.x0,n=this.a*(this.k0*(g-this.ml0+a*o*u/2*(1+l/12*(5-d+9*c+4*f+l/30*(61+y-58*d+270*c-330*d*c+l/56*(1385+543*y-y*d-3111*d))))))+this.y0}else{var v=h*Math.sin(o);if(Math.abs(Math.abs(v)-1)<ta)return 93;if(i=.5*this.a*this.k0*Math.log((1+v)/(1-v))+this.x0,n=h*Math.cos(o)/Math.sqrt(1-Math.pow(v,2)),(v=Math.abs(n))>=1){if(v-1>ta)return 93;n=0}else n=Math.acos(n);s<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return t.x=i,t.y=n,t},inverse:function(t){var e,i,n,r,s=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(this.es)if(i=Nh(e=this.ml0+o/this.k0,this.es,this.en),Math.abs(i)<$o){var a=Math.sin(i),h=Math.cos(i),u=Math.abs(h)>ta?Math.tan(i):0,l=this.ep2*Math.pow(h,2),c=Math.pow(l,2),f=Math.pow(u,2),p=Math.pow(f,2);e=1-this.es*Math.pow(a,2);var d=s*Math.sqrt(e)/this.k0,y=Math.pow(d,2);n=i-(e*=u)*y/(1-this.es)*.5*(1-y/12*(5+3*f-9*l*f+l-4*c-y/30*(61+90*f-252*l*f+45*p+46*l-y/56*(1385+3633*f+4095*p+1574*p*f)))),r=Oa(this.long0+d*(1-y/6*(1+2*f+l-y/20*(5+28*f+24*p+8*l*f+6*l-y/42*(61+662*f+1320*p+720*p*f))))/h)}else n=$o*Pa(o),r=0;else{var g=Math.exp(s/this.k0),v=.5*(g-1/g),m=this.lat0+o/this.k0,_=Math.cos(m);e=Math.sqrt((1-Math.pow(_,2))/(1+Math.pow(v,2))),n=Math.asin(e),o<0&&(n=-n),r=0===v&&0===_?0:Oa(Math.atan2(v,_)+this.long0)}return t.x=r,t.y=n,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function Ah(t){var e=Math.exp(t);return(e-1/e)/2}function jh(t,e){t=Math.abs(t),e=Math.abs(e);var i=Math.max(t,e),n=Math.min(t,e)/(i||1);return i*Math.sqrt(1+Math.pow(n,2))}function Fh(t,e){for(var i,n=2*Math.cos(2*e),r=t.length-1,s=t[r],o=0;--r>=0;)i=n*s-o+t[r],o=s,s=i;return e+i*Math.sin(2*e)}function Th(t,e,i){for(var n,r,s=Math.sin(e),o=Math.cos(e),a=Ah(i),h=function(t){var e=Math.exp(t);return(e+1/e)/2}(i),u=2*o*h,l=-2*s*a,c=t.length-1,f=t[c],p=0,d=0,y=0;--c>=0;)n=d,r=p,f=u*(d=f)-n-l*(p=y)+t[c],y=l*d-r+u*p;return[(u=s*h)*f-(l=o*a)*y,u*y+l*f]}const Lh={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Ih.init.apply(this),this.forward=Ih.forward,this.inverse=Ih.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),i=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),i*=e,this.cgb[1]=i*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=i*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),i*=e,this.cgb[2]=i*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=i*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),i*=e,this.cgb[3]=i*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=i*(1237/630+e*(e*(-24832/14175)-2.4)),i*=e,this.cgb[4]=i*(4174/315+e*(-144838/6237)),this.cbg[4]=i*(-734/315+e*(109598/31185)),i*=e,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+i*(1/4+i*(1/64+i/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=i*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=i*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),i*=e,this.utg[2]=i*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=i*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),i*=e,this.utg[3]=i*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=i*(49561/161280+e*(-179/168+e*(6601661/7257600))),i*=e,this.utg[4]=i*(-4583/161280+e*(108847/3991680)),this.gtu[4]=i*(34729/80640+e*(-3418889/1995840)),i*=e,this.utg[5]=i*(-20648693/638668800),this.gtu[5]=.6650675310896665*i;var n=Fh(this.cbg,this.lat0);this.Zb=-this.Qn*(n+function(t,e){for(var i,n=2*Math.cos(e),r=t.length-1,s=t[r],o=0;--r>=0;)i=n*s-o+t[r],o=s,s=i;return Math.sin(e)*i}(this.gtu,2*n))},forward:function(t){var e=Oa(t.x-this.long0),i=t.y;i=Fh(this.cbg,i);var n=Math.sin(i),r=Math.cos(i),s=Math.sin(e),o=Math.cos(e);i=Math.atan2(n,o*r),e=Math.atan2(s*r,jh(n,r*o)),e=function(t){var e=Math.abs(t);return e=function(t){var e=1+t,i=e-1;return 0===i?t:t*Math.log(e)/i}(e*(1+e/(jh(1,e)+1))),t<0?-e:e}(Math.tan(e));var a,h,u=Th(this.gtu,2*i,2*e);return i+=u[0],e+=u[1],Math.abs(e)<=2.623395162778?(a=this.a*(this.Qn*e)+this.x0,h=this.a*(this.Qn*i+this.Zb)+this.y0):(a=1/0,h=1/0),t.x=a,t.y=h,t},inverse:function(t){var e,i,n=(t.x-this.x0)*(1/this.a),r=(t.y-this.y0)*(1/this.a);if(r=(r-this.Zb)/this.Qn,n/=this.Qn,Math.abs(n)<=2.623395162778){var s=Th(this.utg,2*r,2*n);r+=s[0],n+=s[1],n=Math.atan(Ah(n));var o=Math.sin(r),a=Math.cos(r),h=Math.sin(n),u=Math.cos(n);r=Math.atan2(o*u,jh(h,u*a)),e=Oa((n=Math.atan2(h,u*a))+this.long0),i=Fh(this.cgb,r)}else e=1/0,i=1/0;return t.x=e,t.y=i,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]},Gh={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(Oa(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*ea,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Lh.init.apply(this),this.forward=Lh.forward,this.inverse=Lh.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function kh(t,e){return Math.pow((1-t)/(1+t),e)}const qh={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+na)/(Math.pow(Math.tan(.5*this.lat0+na),this.C)*kh(this.e*t,this.ratexp))},forward:function(t){var e=t.x,i=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+na),this.C)*kh(this.e*Math.sin(i),this.ratexp))-$o,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,i=t.y,n=Math.pow(Math.tan(.5*i+na)/this.K,1/this.C),r=20;r>0&&(i=2*Math.atan(n*kh(this.e*Math.sin(t.y),-.5*this.e))-$o,!(Math.abs(i-t.y)<1e-14));--r)t.y=i;return r?(t.x=e,t.y=i,t):null},names:["gauss"]},Dh={init:function(){qh.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,i,n,r;return t.x=Oa(t.x-this.long0),qh.forward.apply(this,[t]),e=Math.sin(t.y),i=Math.cos(t.y),n=Math.cos(t.x),r=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*i*n),t.x=r*i*Math.sin(t.x),t.y=r*(this.cosc0*e-this.sinc0*i*n),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,i,n,r,s;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,s=Math.sqrt(t.x*t.x+t.y*t.y)){var o=2*Math.atan2(s,this.R2);e=Math.sin(o),i=Math.cos(o),r=Math.asin(i*this.sinc0+t.y*e*this.cosc0/s),n=Math.atan2(t.x*e,s*this.cosc0*i-t.y*this.sinc0*e)}else r=this.phic0,n=0;return t.x=n,t.y=r,qh.inverse.apply(this,[t]),t.x=Oa(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},Bh={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ta&&(this.k0=.5*(1+Pa(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=ta&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ta&&(this.k0=.5*this.cons*Sa(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Ra(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Sa(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-$o,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,i,n,r,s,o,a=t.x,h=t.y,u=Math.sin(h),l=Math.cos(h),c=Oa(a-this.long0);return Math.abs(Math.abs(a-this.long0)-Math.PI)<=ta&&Math.abs(h+this.lat0)<=ta?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*u+this.coslat0*l*Math.cos(c)),t.x=this.a*e*l*Math.sin(c)+this.x0,t.y=this.a*e*(this.coslat0*u-this.sinlat0*l*Math.cos(c))+this.y0,t):(i=2*Math.atan(this.ssfn_(h,u,this.e))-$o,r=Math.cos(i),n=Math.sin(i),Math.abs(this.coslat0)<=ta?(s=Ra(this.e,h*this.con,this.con*u),o=2*this.a*this.k0*s/this.cons,t.x=this.x0+o*Math.sin(a-this.long0),t.y=this.y0-this.con*o*Math.cos(a-this.long0),t):(Math.abs(this.sinlat0)<ta?(e=2*this.a*this.k0/(1+r*Math.cos(c)),t.y=e*n):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*r*Math.cos(c))),t.y=e*(this.cosX0*n-this.sinX0*r*Math.cos(c))+this.y0),t.x=e*r*Math.sin(c)+this.x0,t))},inverse:function(t){var e,i,n,r,s;t.x-=this.x0,t.y-=this.y0;var o=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var a=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,i=this.lat0,o<=ta?(t.x=e,t.y=i,t):(i=Math.asin(Math.cos(a)*this.sinlat0+t.y*Math.sin(a)*this.coslat0/o),e=Math.abs(this.coslat0)<ta?this.lat0>0?Oa(this.long0+Math.atan2(t.x,-1*t.y)):Oa(this.long0+Math.atan2(t.x,t.y)):Oa(this.long0+Math.atan2(t.x*Math.sin(a),o*this.coslat0*Math.cos(a)-t.y*this.sinlat0*Math.sin(a))),t.x=e,t.y=i,t)}if(Math.abs(this.coslat0)<=ta){if(o<=ta)return i=this.lat0,e=this.long0,t.x=e,t.y=i,t;t.x*=this.con,t.y*=this.con,n=o*this.cons/(2*this.a*this.k0),i=this.con*Na(this.e,n),e=this.con*Oa(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else r=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=ta?s=this.X0:(s=Math.asin(Math.cos(r)*this.sinX0+t.y*Math.sin(r)*this.cosX0/o),e=Oa(this.long0+Math.atan2(t.x*Math.sin(r),o*this.cosX0*Math.cos(r)-t.y*this.sinX0*Math.sin(r)))),i=-1*Na(this.e,Math.tan(.5*($o+s)));return t.x=e,t.y=i,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,i){return e*=i,Math.tan(.5*($o+t))*Math.pow((1-e)/(1+e),.5*i)}},Uh={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),i=this.a,n=1/this.rf,r=2*n-Math.pow(n,2),s=this.e=Math.sqrt(r);this.R=this.k0*i*Math.sqrt(1-r)/(1-r*Math.pow(e,2)),this.alpha=Math.sqrt(1+r/(1-r)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),a=Math.log(Math.tan(Math.PI/4+t/2)),h=Math.log((1+s*e)/(1-s*e));this.K=o-this.alpha*a+this.alpha*s/2*h},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),n=-this.alpha*(e+i)+this.K,r=2*(Math.atan(Math.exp(n))-Math.PI/4),s=this.alpha*(t.x-this.lambda0),o=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(s))),a=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(s));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*o+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,i=t.y-this.y0,n=e/this.R,r=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(n)),o=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(r))),a=this.lambda0+o/this.alpha,h=0,u=s,l=-1e3,c=0;Math.abs(u-l)>1e-7;){if(++c>20)return;h=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),l=u,u=2*Math.atan(Math.exp(h))-Math.PI/2}return t.x=a,t.y=u,t},names:["somerc"]};var zh=1e-7;const Wh={init:function(){var t,e,i,n,r,s,o,a,h,u,l,c,f,p=0,d=0,y=0,g=0,v=0,m=0,_=0;this.no_off=(f="object"==typeof(c=this).PROJECTION?Object.keys(c.PROJECTION)[0]:c.PROJECTION,"no_uoff"in c||"no_off"in c||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(f)),this.no_rot="no_rot"in this;var M=!1;"alpha"in this&&(M=!0);var x=!1;if("rectified_grid_angle"in this&&(x=!0),M&&(_=this.alpha),x&&(p=this.rectified_grid_angle*ea),M||x)d=this.longc;else if(y=this.long1,v=this.lat1,g=this.long2,m=this.lat2,Math.abs(v-m)<=zh||(t=Math.abs(v))<=zh||Math.abs(t-$o)<=zh||Math.abs(Math.abs(this.lat0)-$o)<=zh||Math.abs(Math.abs(m)-$o)<=zh)throw new Error;var w=1-this.es;e=Math.sqrt(w),Math.abs(this.lat0)>ta?(a=Math.sin(this.lat0),i=Math.cos(this.lat0),t=1-this.es*a*a,this.B=i*i,this.B=Math.sqrt(1+this.es*this.B*this.B/w),this.A=this.B*this.k0*e/t,(r=(n=this.B*e/(i*Math.sqrt(t)))*n-1)<=0?r=0:(r=Math.sqrt(r),this.lat0<0&&(r=-r)),this.E=r+=n,this.E*=Math.pow(Ra(this.e,this.lat0,a),this.B)):(this.B=1/e,this.A=this.k0,this.E=n=r=1),M||x?(M?(l=Math.asin(Math.sin(_)/n),x||(p=_)):(l=p,_=Math.asin(n*Math.sin(l))),this.lam0=d-Math.asin(.5*(r-1/r)*Math.tan(l))/this.B):(s=Math.pow(Ra(this.e,v,Math.sin(v)),this.B),o=Math.pow(Ra(this.e,m,Math.sin(m)),this.B),r=this.E/s,h=(o-s)/(o+s),u=((u=this.E*this.E)-o*s)/(u+o*s),(t=y-g)<-Math.pi?g-=ra:t>Math.pi&&(g+=ra),this.lam0=Oa(.5*(y+g)-Math.atan(u*Math.tan(.5*this.B*(y-g))/h)/this.B),l=Math.atan(2*Math.sin(this.B*Oa(y-this.lam0))/(r-1/r)),p=_=Math.asin(n*Math.sin(l))),this.singam=Math.sin(l),this.cosgam=Math.cos(l),this.sinrot=Math.sin(p),this.cosrot=Math.cos(p),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(_))),this.lat0<0&&(this.u_0=-this.u_0)),r=.5*l,this.v_pole_n=this.ArB*Math.log(Math.tan(na-r)),this.v_pole_s=this.ArB*Math.log(Math.tan(na+r))},forward:function(t){var e,i,n,r,s,o,a,h,u={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-$o)>ta){if(e=.5*((s=this.E/Math.pow(Ra(this.e,t.y,Math.sin(t.y)),this.B))-(o=1/s)),i=.5*(s+o),r=Math.sin(this.B*t.x),n=(e*this.singam-r*this.cosgam)/i,Math.abs(Math.abs(n)-1)<ta)throw new Error;h=.5*this.ArB*Math.log((1-n)/(1+n)),o=Math.cos(this.B*t.x),a=Math.abs(o)<zh?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+r*this.singam,o)}else h=t.y>0?this.v_pole_n:this.v_pole_s,a=this.ArB*t.y;return this.no_rot?(u.x=a,u.y=h):(a-=this.u_0,u.x=h*this.cosrot+a*this.sinrot,u.y=a*this.cosrot-h*this.sinrot),u.x=this.a*u.x+this.x0,u.y=this.a*u.y+this.y0,u},inverse:function(t){var e,i,n,r,s,o,a,h={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(i=t.y,e=t.x):(i=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),r=.5*((n=Math.exp(-this.BrA*i))-1/n),s=.5*(n+1/n),a=((o=Math.sin(this.BrA*e))*this.cosgam+r*this.singam)/s,Math.abs(Math.abs(a)-1)<ta)h.x=0,h.y=a<0?-$o:$o;else{if(h.y=this.E/Math.sqrt((1+a)/(1-a)),h.y=Na(this.e,Math.pow(h.y,1/this.B)),h.y===1/0)throw new Error;h.x=-this.rB*Math.atan2(r*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return h.x+=this.lam0,h},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},Xh={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<ta)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),i=Math.cos(this.lat1),n=Sa(this.e,e,i),r=Ra(this.e,this.lat1,e),s=Math.sin(this.lat2),o=Math.cos(this.lat2),a=Sa(this.e,s,o),h=Ra(this.e,this.lat2,s),u=Ra(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>ta?this.ns=Math.log(n/a)/Math.log(r/h):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=n/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,i=t.y;Math.abs(2*Math.abs(i)-Math.PI)<=ta&&(i=Pa(i)*($o-2e-10));var n,r,s=Math.abs(Math.abs(i)-$o);if(s>ta)n=Ra(this.e,i,Math.sin(i)),r=this.a*this.f0*Math.pow(n,this.ns);else{if((s=i*this.ns)<=0)return null;r=0}var o=this.ns*Oa(e-this.long0);return t.x=this.k0*(r*Math.sin(o))+this.x0,t.y=this.k0*(this.rh-r*Math.cos(o))+this.y0,t},inverse:function(t){var e,i,n,r,s,o=(t.x-this.x0)/this.k0,a=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+a*a),i=1):(e=-Math.sqrt(o*o+a*a),i=-1);var h=0;if(0!==e&&(h=Math.atan2(i*o,i*a)),0!==e||this.ns>0){if(i=1/this.ns,n=Math.pow(e/(this.a*this.f0),i),-9999===(r=Na(this.e,n)))return null}else r=-$o;return s=Oa(h/this.ns+this.long0),t.x=s,t.y=r,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc"]},Yh={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,i,n,r,s,o,a,h=t.x,u=t.y,l=Oa(h-this.long0);return e=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/e)-this.s45),n=-l*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(n)),s=Math.asin(Math.cos(i)*Math.sin(n)/Math.cos(r)),o=this.n*s,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),t.y=a*Math.cos(o)/1,t.x=a*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,i,n,r,s,o,a,h=t.x;t.x=t.y,t.y=h,this.czech||(t.y*=-1,t.x*=-1),s=Math.sqrt(t.x*t.x+t.y*t.y),r=Math.atan2(t.y,t.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/s,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),i=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(e)),t.x=this.long0-i/this.alfa,o=e,a=0;var u=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-t.y)<1e-10&&(a=1),o=t.y,u+=1}while(0===a&&u<15);return u>=15?null:t},names:["Krovak","krovak"]};function Qh(t,e,i,n,r){return t*r-e*Math.sin(2*r)+i*Math.sin(4*r)-n*Math.sin(6*r)}function Vh(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function Zh(t){return.375*t*(1+.25*t*(1+.46875*t))}function Hh(t){return.05859375*t*t*(1+.75*t)}function Jh(t){return t*t*t*(35/3072)}function Kh(t,e,i){var n=e*i;return t/Math.sqrt(1-n*n)}function $h(t){return Math.abs(t)<$o?t:t-Pa(t)*Math.PI}function tu(t,e,i,n,r){var s,o;s=t/e;for(var a=0;a<15;a++)if(s+=o=(t-(e*s-i*Math.sin(2*s)+n*Math.sin(4*s)-r*Math.sin(6*s)))/(e-2*i*Math.cos(2*s)+4*n*Math.cos(4*s)-6*r*Math.cos(6*s)),Math.abs(o)<=1e-10)return s;return NaN}const eu={init:function(){this.sphere||(this.e0=Vh(this.es),this.e1=Zh(this.es),this.e2=Hh(this.es),this.e3=Jh(this.es),this.ml0=this.a*Qh(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,i,n=t.x,r=t.y;if(n=Oa(n-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(r)*Math.sin(n)),i=this.a*(Math.atan2(Math.tan(r),Math.cos(n))-this.lat0);else{var s=Math.sin(r),o=Math.cos(r),a=Kh(this.a,this.e,s),h=Math.tan(r)*Math.tan(r),u=n*Math.cos(r),l=u*u,c=this.es*o*o/(1-this.es);e=a*u*(1-l*h*(1/6-(8-h+8*c)*l/120)),i=this.a*Qh(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+a*s/o*l*(.5+(5-h+6*c)*l/24)}return t.x=e+this.x0,t.y=i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,i,n=t.x/this.a,r=t.y/this.a;if(this.sphere){var s=r+this.lat0;e=Math.asin(Math.sin(s)*Math.cos(n)),i=Math.atan2(Math.tan(n),Math.cos(s))}else{var o=tu(this.ml0/this.a+r,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-$o)<=ta)return t.x=this.long0,t.y=$o,r<0&&(t.y*=-1),t;var a=Kh(this.a,this.e,Math.sin(o)),h=a*a*a/this.a/this.a*(1-this.es),u=Math.pow(Math.tan(o),2),l=n*this.a/a,c=l*l;e=o-a*Math.tan(o)/h*l*l*(.5-(1+3*u)*l*l/24),i=l*(1-c*(u/3+(1+3*u)*u*c/15))/Math.cos(o)}return t.x=Oa(i+this.long0),t.y=$h(e),t},names:["Cassini","Cassini_Soldner","cass"]};function iu(t,e){var i;return t>1e-7?(1-t*t)*(e/(1-(i=t*e)*i)-.5/t*Math.log((1-i)/(1+i))):2*e}const nu={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-$o)<ta?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<ta?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=iu(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,i=[];return i[0]=.3333333333333333*t,e=t*t,i[0]+=.17222222222222222*e,i[1]=.06388888888888888*e,e*=t,i[0]+=.10257936507936508*e,i[1]+=.0664021164021164*e,i[2]=.016415012942191543*e,i}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=iu(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,i,n,r,s,o,a,h,u,l,c=t.x,f=t.y;if(c=Oa(c-this.long0),this.sphere){if(s=Math.sin(f),l=Math.cos(f),n=Math.cos(c),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((i=this.mode===this.EQUIT?1+l*n:1+this.sinph0*s+this.cosph0*l*n)<=ta)return null;e=(i=Math.sqrt(2/i))*l*Math.sin(c),i*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*l*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(f+this.lat0)<ta)return null;i=na-.5*f,e=(i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)))*Math.sin(c),i*=n}}else{switch(a=0,h=0,u=0,n=Math.cos(c),r=Math.sin(c),s=Math.sin(f),o=iu(this.e,s),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(a=o/this.qp,h=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:u=1+this.sinb1*a+this.cosb1*h*n;break;case this.EQUIT:u=1+h*n;break;case this.N_POLE:u=$o+f,o=this.qp-o;break;case this.S_POLE:u=f-$o,o=this.qp+o}if(Math.abs(u)<ta)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),i=this.mode===this.OBLIQ?this.ymf*u*(this.cosb1*a-this.sinb1*h*n):(u=Math.sqrt(2/(1+h*n)))*a*this.ymf,e=this.xmf*u*h*r;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(u=Math.sqrt(o))*r,i=n*(this.mode===this.S_POLE?u:-u)):e=i=0}}return t.x=this.a*e+this.x0,t.y=this.a*i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,i,n,r,s,o,a,h,u,l,c=t.x/this.a,f=t.y/this.a;if(this.sphere){var p,d=0,y=0;if((i=.5*(p=Math.sqrt(c*c+f*f)))>1)return null;switch(i=2*Math.asin(i),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(y=Math.sin(i),d=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(p)<=ta?0:Math.asin(f*y/p),c*=y,f=d*p;break;case this.OBLIQ:i=Math.abs(p)<=ta?this.lat0:Math.asin(d*this.sinph0+f*y*this.cosph0/p),c*=y*this.cosph0,f=(d-Math.sin(i)*this.sinph0)*p;break;case this.N_POLE:f=-f,i=$o-i;break;case this.S_POLE:i-=$o}e=0!==f||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(c,f):0}else{if(a=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(c/=this.dd,f*=this.dd,(o=Math.sqrt(c*c+f*f))<ta)return t.x=this.long0,t.y=this.lat0,t;r=2*Math.asin(.5*o/this.rq),n=Math.cos(r),c*=r=Math.sin(r),this.mode===this.OBLIQ?(a=n*this.sinb1+f*r*this.cosb1/o,s=this.qp*a,f=o*this.cosb1*n-f*this.sinb1*r):(a=f*r/o,s=this.qp*a,f=o*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(f=-f),!(s=c*c+f*f))return t.x=this.long0,t.y=this.lat0,t;a=1-s/this.qp,this.mode===this.S_POLE&&(a=-a)}e=Math.atan2(c,f),l=(h=Math.asin(a))+h,i=h+(u=this.apa)[0]*Math.sin(l)+u[1]*Math.sin(l+l)+u[2]*Math.sin(l+l+l)}return t.x=Oa(this.long0+e),t.y=i,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function ru(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}const su={init:function(){Math.abs(this.lat1+this.lat2)<ta||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Sa(this.e3,this.sin_po,this.cos_po),this.qs1=iu(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Sa(this.e3,this.sin_po,this.cos_po),this.qs2=iu(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=iu(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>ta?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,i=t.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var n=iu(this.e3,this.sin_phi,this.cos_phi),r=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,s=this.ns0*Oa(e-this.long0),o=r*Math.sin(s)+this.x0,a=this.rh-r*Math.cos(s)+this.y0;return t.x=o,t.y=a,t},inverse:function(t){var e,i,n,r,s,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),n=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),n=-1),r=0,0!==e&&(r=Math.atan2(n*t.x,n*t.y)),n=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-n*n)/(2*this.ns0)):(i=(this.c-n*n)/this.ns0,o=this.phi1z(this.e3,i)),s=Oa(r/this.ns0+this.long0),t.x=s,t.y=o,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var i,n,r,s,o=ru(.5*e);if(t<ta)return o;for(var a=t*t,h=1;h<=25;h++)if(o+=s=.5*(r=1-(n=t*(i=Math.sin(o)))*n)*r/Math.cos(o)*(e/(1-a)-i/r+.5/t*Math.log((1-n)/(1+n))),Math.abs(s)<=1e-7)return o;return null}},ou={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,i,n,r,s,o,a,h=t.x,u=t.y;return n=Oa(h-this.long0),e=Math.sin(u),i=Math.cos(u),r=Math.cos(n),(s=this.sin_p14*e+this.cos_p14*i*r)>0||Math.abs(s)<=ta?(o=this.x0+1*this.a*i*Math.sin(n)/s,a=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*i*r)/s):(o=this.x0+this.infinity_dist*i*Math.sin(n),a=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*i*r)),t.x=o,t.y=a,t},inverse:function(t){var e,i,n,r,s,o;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(r=Math.atan2(e,this.rc),i=Math.sin(r),o=ru((n=Math.cos(r))*this.sin_p14+t.y*i*this.cos_p14/e),s=Math.atan2(t.x*i,e*this.cos_p14*n-t.y*this.sin_p14*i),s=Oa(this.long0+s)):(o=this.phic0,s=0),t.x=s,t.y=o,t},names:["gnom"]},au={init:function(){this.sphere||(this.k0=Sa(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,i,n=t.x,r=t.y,s=Oa(n-this.long0);if(this.sphere)e=this.x0+this.a*s*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var o=iu(this.e,Math.sin(r));e=this.x0+this.a*this.k0*s,i=this.y0+this.a*o*.5/this.k0}return t.x=e,t.y=i,t},inverse:function(t){var e,i;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=Oa(this.long0+t.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(i=function(t,e){var i=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-i)<1e-6)return e<0?-1*$o:$o;for(var n,r,s,o,a=Math.asin(.5*e),h=0;h<30;h++)if(r=Math.sin(a),s=Math.cos(a),o=t*r,a+=n=Math.pow(1-o*o,2)/(2*s)*(e/(1-t*t)-r/(1-o*o)+.5/t*Math.log((1-o)/(1+o))),Math.abs(n)<=1e-10)return a;return NaN}(this.e,2*t.y*this.k0/this.a),e=Oa(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=i,t},names:["cea"]},hu={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,i=t.y,n=Oa(e-this.long0),r=$h(i-this.lat0);return t.x=this.x0+this.a*n*this.rc,t.y=this.y0+this.a*r,t},inverse:function(t){var e=t.x,i=t.y;return t.x=Oa(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=$h(this.lat0+(i-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},uu={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Vh(this.es),this.e1=Zh(this.es),this.e2=Hh(this.es),this.e3=Jh(this.es),this.ml0=this.a*Qh(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,i,n,r=t.x,s=t.y,o=Oa(r-this.long0);if(n=o*Math.sin(s),this.sphere)Math.abs(s)<=ta?(e=this.a*o,i=-1*this.a*this.lat0):(e=this.a*Math.sin(n)/Math.tan(s),i=this.a*($h(s-this.lat0)+(1-Math.cos(n))/Math.tan(s)));else if(Math.abs(s)<=ta)e=this.a*o,i=-1*this.ml0;else{var a=Kh(this.a,this.e,Math.sin(s))/Math.tan(s);e=a*Math.sin(n),i=this.a*Qh(this.e0,this.e1,this.e2,this.e3,s)-this.ml0+a*(1-Math.cos(n))}return t.x=e+this.x0,t.y=i+this.y0,t},inverse:function(t){var e,i,n,r,s,o,a,h,u;if(n=t.x-this.x0,r=t.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=ta)e=Oa(n/this.a+this.long0),i=0;else{var l;for(o=this.lat0+r/this.a,a=n*n/this.a/this.a+o*o,h=o,s=20;s;--s)if(h+=u=-1*(o*(h*(l=Math.tan(h))+1)-h-.5*(h*h+a)*l)/((h-o)/l-1),Math.abs(u)<=ta){i=h;break}e=Oa(this.long0+Math.asin(n*Math.tan(h)/this.a)/Math.sin(i))}else if(Math.abs(r+this.ml0)<=ta)i=0,e=Oa(this.long0+n/this.a);else{var c,f,p,d,y;for(o=(this.ml0+r)/this.a,a=n*n/this.a/this.a+o*o,h=o,s=20;s;--s)if(y=this.e*Math.sin(h),c=Math.sqrt(1-y*y)*Math.tan(h),f=this.a*Qh(this.e0,this.e1,this.e2,this.e3,h),p=this.e0-2*this.e1*Math.cos(2*h)+4*this.e2*Math.cos(4*h)-6*this.e3*Math.cos(6*h),h-=u=(o*(c*(d=f/this.a)+1)-d-.5*c*(d*d+a))/(this.es*Math.sin(2*h)*(d*d+a-2*o*d)/(4*c)+(o-d)*(c*p-2/Math.sin(2*h))-p),Math.abs(u)<=ta){i=h;break}c=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),e=Oa(this.long0+Math.asin(n*c/this.a)/Math.sin(i))}return t.x=e,t.y=i,t},names:["Polyconic","poly"]},lu={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,i=t.x,n=t.y-this.lat0,r=i-this.long0,s=n/Ko*1e-5,o=r,a=1,h=0;for(e=1;e<=10;e++)a*=s,h+=this.A[e]*a;var u,l=h,c=o,f=1,p=0,d=0,y=0;for(e=1;e<=6;e++)u=p*l+f*c,f=f*l-p*c,p=u,d=d+this.B_re[e]*f-this.B_im[e]*p,y=y+this.B_im[e]*f+this.B_re[e]*p;return t.x=y*this.a+this.x0,t.y=d*this.a+this.y0,t},inverse:function(t){var e,i,n=t.x,r=t.y,s=n-this.x0,o=(r-this.y0)/this.a,a=s/this.a,h=1,u=0,l=0,c=0;for(e=1;e<=6;e++)i=u*o+h*a,h=h*o-u*a,u=i,l=l+this.C_re[e]*h-this.C_im[e]*u,c=c+this.C_im[e]*h+this.C_re[e]*u;for(var f=0;f<this.iterations;f++){var p,d=l,y=c,g=o,v=a;for(e=2;e<=6;e++)p=y*l+d*c,d=d*l-y*c,y=p,g+=(e-1)*(this.B_re[e]*d-this.B_im[e]*y),v+=(e-1)*(this.B_im[e]*d+this.B_re[e]*y);d=1,y=0;var m=this.B_re[1],_=this.B_im[1];for(e=2;e<=6;e++)p=y*l+d*c,d=d*l-y*c,y=p,m+=e*(this.B_re[e]*d-this.B_im[e]*y),_+=e*(this.B_im[e]*d+this.B_re[e]*y);var M=m*m+_*_;l=(g*m+v*_)/M,c=(v*m-g*_)/M}var x=l,w=c,b=1,E=0;for(e=1;e<=9;e++)b*=x,E+=this.D[e]*b;var C=this.lat0+E*Ko*1e5,S=this.long0+w;return t.x=S,t.y=C,t},names:["New_Zealand_Map_Grid","nzmg"]},cu={init:function(){},forward:function(t){var e=t.x,i=t.y,n=Oa(e-this.long0),r=this.x0+this.a*n,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return t.x=r,t.y=s,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=Oa(this.long0+t.x/this.a),i=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=i,t},names:["Miller_Cylindrical","mill"]},fu={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Oh(this.es)},forward:function(t){var e,i,n=t.x,r=t.y;if(n=Oa(n-this.long0),this.sphere){if(this.m)for(var s=this.n*Math.sin(r),o=20;o;--o){var a=(this.m*r+Math.sin(r)-s)/(this.m+Math.cos(r));if(r-=a,Math.abs(a)<ta)break}else r=1!==this.n?Math.asin(this.n*Math.sin(r)):r;e=this.a*this.C_x*n*(this.m+Math.cos(r)),i=this.a*this.C_y*r}else{var h=Math.sin(r),u=Math.cos(r);i=this.a*Rh(r,h,u,this.en),e=this.a*n*u/Math.sqrt(1-this.es*h*h)}return t.x=e,t.y=i,t},inverse:function(t){var e,i,n;return t.x-=this.x0,i=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,i/=this.C_x*(this.m+Math.cos(e)),this.m?e=ru((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=ru(Math.sin(e)/this.n)),i=Oa(i+this.long0),e=$h(e)):(e=Nh(t.y/this.a,this.es,this.en),(n=Math.abs(e))<$o?(n=Math.sin(e),i=Oa(this.long0+t.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(e)))):n-ta<$o&&(i=this.long0)),t.x=i,t.y=e,t},names:["Sinusoidal","sinu"]},pu={init:function(){},forward:function(t){for(var e=t.x,i=t.y,n=Oa(e-this.long0),r=i,s=Math.PI*Math.sin(i);;){var o=-(r+Math.sin(r)-s)/(1+Math.cos(r));if(r+=o,Math.abs(o)<ta)break}r/=2,Math.PI/2-Math.abs(i)<ta&&(n=0);var a=.900316316158*this.a*n*Math.cos(r)+this.x0,h=1.4142135623731*this.a*Math.sin(r)+this.y0;return t.x=a,t.y=h,t},inverse:function(t){var e,i;t.x-=this.x0,t.y-=this.y0,i=t.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),e=Math.asin(i);var n=Oa(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),i=(2*e+Math.sin(2*e))/Math.PI,Math.abs(i)>1&&(i=1);var r=Math.asin(i);return t.x=n,t.y=r,t},names:["Mollweide","moll"]},du={init:function(){Math.abs(this.lat1+this.lat2)<ta||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Vh(this.es),this.e1=Zh(this.es),this.e2=Hh(this.es),this.e3=Jh(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Sa(this.e,this.sinphi,this.cosphi),this.ml1=Qh(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<ta?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Sa(this.e,this.sinphi,this.cosphi),this.ml2=Qh(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Qh(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,i=t.x,n=t.y;if(this.sphere)e=this.a*(this.g-n);else{var r=Qh(this.e0,this.e1,this.e2,this.e3,n);e=this.a*(this.g-r)}var s=this.ns*Oa(i-this.long0),o=this.x0+e*Math.sin(s),a=this.y0+this.rh-e*Math.cos(s);return t.x=o,t.y=a,t},inverse:function(t){var e,i,n,r;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var s=0;return 0!==i&&(s=Math.atan2(e*t.x,e*t.y)),this.sphere?(r=Oa(this.long0+s/this.ns),n=$h(this.g-i/this.a),t.x=r,t.y=n,t):(n=tu(this.g-i/this.a,this.e0,this.e1,this.e2,this.e3),r=Oa(this.long0+s/this.ns),t.x=r,t.y=n,t)},names:["Equidistant_Conic","eqdc"]},yu={init:function(){this.R=this.a},forward:function(t){var e,i,n=t.x,r=t.y,s=Oa(n-this.long0);Math.abs(r)<=ta&&(e=this.x0+this.R*s,i=this.y0);var o=ru(2*Math.abs(r/Math.PI));(Math.abs(s)<=ta||Math.abs(Math.abs(r)-$o)<=ta)&&(e=this.x0,i=r>=0?this.y0+Math.PI*this.R*Math.tan(.5*o):this.y0+Math.PI*this.R*-Math.tan(.5*o));var a=.5*Math.abs(Math.PI/s-s/Math.PI),h=a*a,u=Math.sin(o),l=Math.cos(o),c=l/(u+l-1),f=c*c,p=c*(2/u-1),d=p*p,y=Math.PI*this.R*(a*(c-d)+Math.sqrt(h*(c-d)*(c-d)-(d+h)*(f-d)))/(d+h);s<0&&(y=-y),e=this.x0+y;var g=h+c;return y=Math.PI*this.R*(p*g-a*Math.sqrt((d+h)*(h+1)-g*g))/(d+h),i=r>=0?this.y0+y:this.y0-y,t.x=e,t.y=i,t},inverse:function(t){var e,i,n,r,s,o,a,h,u,l,c,f;return t.x-=this.x0,t.y-=this.y0,c=Math.PI*this.R,s=(n=t.x/c)*n+(r=t.y/c)*r,c=3*(r*r/(h=-2*(o=-Math.abs(r)*(1+s))+1+2*r*r+s*s)+(2*(a=o-2*r*r+n*n)*a*a/h/h/h-9*o*a/h/h)/27)/(u=(o-a*a/3/h)/h)/(l=2*Math.sqrt(-u/3)),Math.abs(c)>1&&(c=c>=0?1:-1),f=Math.acos(c)/3,i=t.y>=0?(-l*Math.cos(f+Math.PI/3)-a/3/h)*Math.PI:-(-l*Math.cos(f+Math.PI/3)-a/3/h)*Math.PI,e=Math.abs(n)<ta?this.long0:Oa(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(n*n-r*r)+s*s))/2/n),t.x=e,t.y=i,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},gu={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,i,n,r,s,o,a,h,u,l,c,f,p,d,y,g,v,m,_,M,x,w,b=t.x,E=t.y,C=Math.sin(t.y),S=Math.cos(t.y),P=Oa(b-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=ta?(t.x=this.x0+this.a*($o-E)*Math.sin(P),t.y=this.y0-this.a*($o-E)*Math.cos(P),t):Math.abs(this.sin_p12+1)<=ta?(t.x=this.x0+this.a*($o+E)*Math.sin(P),t.y=this.y0+this.a*($o+E)*Math.cos(P),t):(m=this.sin_p12*C+this.cos_p12*S*Math.cos(P),v=(g=Math.acos(m))?g/Math.sin(g):1,t.x=this.x0+this.a*v*S*Math.sin(P),t.y=this.y0+this.a*v*(this.cos_p12*C-this.sin_p12*S*Math.cos(P)),t):(e=Vh(this.es),i=Zh(this.es),n=Hh(this.es),r=Jh(this.es),Math.abs(this.sin_p12-1)<=ta?(s=this.a*Qh(e,i,n,r,$o),o=this.a*Qh(e,i,n,r,E),t.x=this.x0+(s-o)*Math.sin(P),t.y=this.y0-(s-o)*Math.cos(P),t):Math.abs(this.sin_p12+1)<=ta?(s=this.a*Qh(e,i,n,r,$o),o=this.a*Qh(e,i,n,r,E),t.x=this.x0+(s+o)*Math.sin(P),t.y=this.y0+(s+o)*Math.cos(P),t):(a=C/S,h=Kh(this.a,this.e,this.sin_p12),u=Kh(this.a,this.e,C),l=Math.atan((1-this.es)*a+this.es*h*this.sin_p12/(u*S)),_=0===(c=Math.atan2(Math.sin(P),this.cos_p12*Math.tan(l)-this.sin_p12*Math.cos(P)))?Math.asin(this.cos_p12*Math.sin(l)-this.sin_p12*Math.cos(l)):Math.abs(Math.abs(c)-Math.PI)<=ta?-Math.asin(this.cos_p12*Math.sin(l)-this.sin_p12*Math.cos(l)):Math.asin(Math.sin(P)*Math.cos(l)/Math.sin(c)),f=this.e*this.sin_p12/Math.sqrt(1-this.es),g=h*_*(1-(M=_*_)*(y=(p=this.e*this.cos_p12*Math.cos(c)/Math.sqrt(1-this.es))*p)*(1-y)/6+(x=M*_)/8*(d=f*p)*(1-2*y)+(w=x*_)/120*(y*(4-7*y)-3*f*f*(1-7*y))-w*_/48*d),t.x=this.x0+g*Math.sin(c),t.y=this.y0+g*Math.cos(c),t))},inverse:function(t){var e,i,n,r,s,o,a,h,u,l,c,f,p,d,y,g,v,m,_,M,x,w,b;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*$o*this.a)return;return i=e/this.a,n=Math.sin(i),r=Math.cos(i),s=this.long0,Math.abs(e)<=ta?o=this.lat0:(o=ru(r*this.sin_p12+t.y*n*this.cos_p12/e),a=Math.abs(this.lat0)-$o,s=Math.abs(a)<=ta?this.lat0>=0?Oa(this.long0+Math.atan2(t.x,-t.y)):Oa(this.long0-Math.atan2(-t.x,t.y)):Oa(this.long0+Math.atan2(t.x*n,e*this.cos_p12*r-t.y*this.sin_p12*n))),t.x=s,t.y=o,t}return h=Vh(this.es),u=Zh(this.es),l=Hh(this.es),c=Jh(this.es),Math.abs(this.sin_p12-1)<=ta?(o=tu(((f=this.a*Qh(h,u,l,c,$o))-(e=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,h,u,l,c),s=Oa(this.long0+Math.atan2(t.x,-1*t.y)),t.x=s,t.y=o,t):Math.abs(this.sin_p12+1)<=ta?(f=this.a*Qh(h,u,l,c,$o),o=tu(((e=Math.sqrt(t.x*t.x+t.y*t.y))-f)/this.a,h,u,l,c),s=Oa(this.long0+Math.atan2(t.x,t.y)),t.x=s,t.y=o,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),y=Math.atan2(t.x,t.y),p=Kh(this.a,this.e,this.sin_p12),g=Math.cos(y),m=-(v=this.e*this.cos_p12*g)*v/(1-this.es),_=3*this.es*(1-m)*this.sin_p12*this.cos_p12*g/(1-this.es),w=1-m*(x=(M=e/p)-m*(1+m)*Math.pow(M,3)/6-_*(1+3*m)*Math.pow(M,4)/24)*x/2-M*x*x*x/6,d=Math.asin(this.sin_p12*Math.cos(x)+this.cos_p12*Math.sin(x)*g),s=Oa(this.long0+Math.asin(Math.sin(y)*Math.sin(x)/Math.cos(d))),b=Math.sin(d),o=Math.atan2((b-this.es*w*this.sin_p12)*Math.tan(d),b*(1-this.es)),t.x=s,t.y=o,t)},names:["Azimuthal_Equidistant","aeqd"]},vu={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,i,n,r,s,o,a,h=t.x,u=t.y;return n=Oa(h-this.long0),e=Math.sin(u),i=Math.cos(u),r=Math.cos(n),((s=this.sin_p14*e+this.cos_p14*i*r)>0||Math.abs(s)<=ta)&&(o=1*this.a*i*Math.sin(n),a=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*i*r)),t.x=o,t.y=a,t},inverse:function(t){var e,i,n,r,s,o,a;return t.x-=this.x0,t.y-=this.y0,i=ru((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),n=Math.sin(i),r=Math.cos(i),o=this.long0,Math.abs(e)<=ta?(a=this.lat0,t.x=o,t.y=a,t):(a=ru(r*this.sin_p14+t.y*n*this.cos_p14/e),s=Math.abs(this.lat0)-$o,Math.abs(s)<=ta?(o=this.lat0>=0?Oa(this.long0+Math.atan2(t.x,-t.y)):Oa(this.long0-Math.atan2(-t.x,t.y)),t.x=o,t.y=a,t):(o=Oa(this.long0+Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n)),t.x=o,t.y=a,t))},names:["ortho"]};function mu(t,e,i,n){var r;return t<ta?(n.value=1,r=0):(r=Math.atan2(e,i),Math.abs(r)<=na?n.value=1:r>na&&r<=$o+na?(n.value=2,r-=$o):r>$o+na||r<=-($o+na)?(n.value=3,r=r>=0?r-sa:r+sa):(n.value=4,r+=$o)),r}function _u(t,e){var i=t+e;return i<-sa?i+=ra:i>+sa&&(i-=ra),i}const Mu={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=$o-na/2?this.face=5:this.lat0<=-($o-na/2)?this.face=6:Math.abs(this.long0)<=na?this.face=1:Math.abs(this.long0)<=$o+na?this.face=this.long0>0?2:4:this.face=3,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,i,n,r,s,o,a={x:0,y:0},h={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,i=t.x,5===this.face)r=$o-e,i>=na&&i<=$o+na?(h.value=1,n=i-$o):i>$o+na||i<=-($o+na)?(h.value=2,n=i>0?i-sa:i+sa):i>-($o+na)&&i<=-na?(h.value=3,n=i+$o):(h.value=4,n=i);else if(6===this.face)r=$o+e,i>=na&&i<=$o+na?(h.value=1,n=-i+$o):i<na&&i>=-na?(h.value=2,n=-i):i<-na&&i>=-($o+na)?(h.value=3,n=-i-$o):(h.value=4,n=i>0?-i+sa:-i-sa);else{var u,l,c,f,p,d;2===this.face?i=_u(i,+$o):3===this.face?i=_u(i,+sa):4===this.face&&(i=_u(i,-$o)),f=Math.sin(e),p=Math.cos(e),d=Math.sin(i),u=p*Math.cos(i),l=p*d,c=f,1===this.face?n=mu(r=Math.acos(u),c,l,h):2===this.face?n=mu(r=Math.acos(l),c,-u,h):3===this.face?n=mu(r=Math.acos(-u),c,-l,h):4===this.face?n=mu(r=Math.acos(-l),c,u,h):(r=n=0,h.value=1)}return o=Math.atan(12/sa*(n+Math.acos(Math.sin(n)*Math.cos(na))-$o)),s=Math.sqrt((1-Math.cos(r))/(Math.cos(o)*Math.cos(o))/(1-Math.cos(Math.atan(1/Math.cos(n))))),2===h.value?o+=$o:3===h.value?o+=sa:4===h.value&&(o+=1.5*sa),a.x=s*Math.cos(o),a.y=s*Math.sin(o),a.x=a.x*this.a+this.x0,a.y=a.y*this.a+this.y0,t.x=a.x,t.y=a.y,t},inverse:function(t){var e,i,n,r,s,o,a,h,u,l,c,f,p={lam:0,phi:0},d={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,i=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?d.value=1:t.y>=0&&t.y>=Math.abs(t.x)?(d.value=2,e-=$o):t.x<0&&-t.x>=Math.abs(t.y)?(d.value=3,e=e<0?e+sa:e-sa):(d.value=4,e+=$o),u=sa/12*Math.tan(e),s=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),o=Math.atan(s),(a=1-(n=Math.cos(e))*n*(r=Math.tan(i))*r*(1-Math.cos(Math.atan(1/Math.cos(o)))))<-1?a=-1:a>1&&(a=1),5===this.face)h=Math.acos(a),p.phi=$o-h,1===d.value?p.lam=o+$o:2===d.value?p.lam=o<0?o+sa:o-sa:3===d.value?p.lam=o-$o:p.lam=o;else if(6===this.face)h=Math.acos(a),p.phi=h-$o,1===d.value?p.lam=-o+$o:2===d.value?p.lam=-o:3===d.value?p.lam=-o-$o:p.lam=o<0?-o-sa:-o+sa;else{var y,g,v;u=(y=a)*y,g=(u+=(v=u>=1?0:Math.sqrt(1-u)*Math.sin(o))*v)>=1?0:Math.sqrt(1-u),2===d.value?(u=g,g=-v,v=u):3===d.value?(g=-g,v=-v):4===d.value&&(u=g,g=v,v=-u),2===this.face?(u=y,y=-g,g=u):3===this.face?(y=-y,g=-g):4===this.face&&(u=y,y=g,g=-u),p.phi=Math.acos(-v)-$o,p.lam=Math.atan2(g,y),2===this.face?p.lam=_u(p.lam,-$o):3===this.face?p.lam=_u(p.lam,-sa):4===this.face&&(p.lam=_u(p.lam,+$o))}return 0!==this.es&&(l=p.phi<0?1:0,c=Math.tan(p.phi),f=this.b/Math.sqrt(c*c+this.one_minus_f_squared),p.phi=Math.atan(Math.sqrt(this.a*this.a-f*f)/(this.one_minus_f*f)),l&&(p.phi=-p.phi)),p.lam+=this.long0,t.x=p.lam,t.y=p.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]};var xu=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],wu=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],bu=.8487,Eu=1.3523,Cu=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};const Su={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=Oa(t.x-this.long0),i=Math.abs(t.y),n=Math.floor(11.459155902616464*i);n<0?n=0:n>=18&&(n=17);var r={x:Cu(xu[n],i=ia*(i-.08726646259971647*n))*e,y:Cu(wu[n],i)};return t.y<0&&(r.y=-r.y),r.x=r.x*this.a*bu+this.x0,r.y=r.y*this.a*Eu+this.y0,r},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*bu),y:Math.abs(t.y-this.y0)/(this.a*Eu)};if(e.y>=1)e.x/=xu[18][0],e.y=t.y<0?-$o:$o;else{var i=Math.floor(18*e.y);for(i<0?i=0:i>=18&&(i=17);;)if(wu[i][0]>e.y)--i;else{if(!(wu[i+1][0]<=e.y))break;++i}var n=wu[i],r=5*(e.y-n[0])/(wu[i+1][0]-n[0]);r=function(t,e,i,n){for(var r=e;n;--n){var s=t(r);if(r-=s,Math.abs(s)<1e-10)break}return r}((function(t){return(Cu(n,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(n,t)}),r,0,100),e.x/=Cu(xu[i],r),e.y=(5*i+r)*ea,t.y<0&&(e.y=-e.y)}return e.x=Oa(e.x+this.long0),e},names:["Robinson","robin"]},Pu={init:function(){this.name="geocent"},forward:function(t){return Za(t,this.es,this.a)},inverse:function(t){return Ha(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};var Ou={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};const Ru={init:function(){if(Object.keys(Ou).forEach(function(t){if(void 0===this[t])this[t]=Ou[t].def;else{if(Ou[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);Ou[t].num&&(this[t]=parseFloat(this[t]))}Ou[t].degrees&&(this[t]=this[t]*ea)}.bind(this)),Math.abs(Math.abs(this.lat0)-$o)<ta?this.mode=this.lat0<0?1:0:Math.abs(this.lat0)<ta?this.mode=2:(this.mode=3,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,i,n,r,s=Math.sin(t.y),o=Math.cos(t.y),a=Math.cos(t.x);switch(this.mode){case 3:i=this.sinph0*s+this.cosph0*o*a;break;case 2:i=o*a;break;case 1:i=-s;break;case 0:i=s}switch(e=(i=this.pn1/(this.p-i))*o*Math.sin(t.x),this.mode){case 3:i*=this.cosph0*s-this.sinph0*o*a;break;case 2:i*=s;break;case 0:i*=-o*a;break;case 1:i*=o*a}return r=1/((n=i*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-i*this.sg)*this.cw*r,i=n*r,t.x=e*this.a,t.y=i*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,i,n,r={x:t.x,y:t.y};n=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*n,i=this.pn1*t.y*this.cw*n,t.x=e*this.cg+i*this.sg,t.y=i*this.cg-e*this.sg;var s=jh(t.x,t.y);if(Math.abs(s)<ta)r.x=0,r.y=t.y;else{var o,a;switch(a=1-s*s*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/s+s/this.pn1),o=Math.sqrt(1-a*a),this.mode){case 3:r.y=Math.asin(o*this.sinph0+t.y*a*this.cosph0/s),t.y=(o-this.sinph0*Math.sin(r.y))*s,t.x*=a*this.cosph0;break;case 2:r.y=Math.asin(t.y*a/s),t.y=o*s,t.x*=a;break;case 0:r.y=Math.asin(o),t.y=-t.y;break;case 1:r.y=-Math.asin(o)}r.x=Math.atan2(t.x,t.y)}return t.x=r.x+this.long0,t.y=r.y,t},names:["Tilted_Perspective","tpers"]};var Nu;hh.defaultDatum="WGS84",hh.Proj=Va,hh.WGS84=new hh.Proj("WGS84"),hh.Point=Eh,hh.toPoint=ih,hh.defs=wa,hh.nadgrid=function(t,e){var i=new DataView(e),n=function(t){var e=t.getInt32(8,!1);return 11!==e&&(11!==(e=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}(i),r=function(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:za(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(i,n);r.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var s=function(t,e,i){for(var n=[],r=0;r<e.nSubgrids;r++){var s=Xa(t,176,i),o=Ya(t,176,s,i),a=Math.round(1+(s.upperLongitude-s.lowerLongitude)/s.longitudeInterval),h=Math.round(1+(s.upperLatitude-s.lowerLatitude)/s.latitudeInterval);n.push({ll:[Ua(s.lowerLongitude),Ua(s.lowerLatitude)],del:[Ua(s.longitudeInterval),Ua(s.latitudeInterval)],lim:[a,h],count:s.gridNodeCount,cvs:Wa(o)})}return n}(i,r,n),o={header:r,subgrids:s};return Da[t]=o,o},hh.transform=rh,hh.mgrs=dh,hh.version="__VERSION__",(Nu=hh).Proj.projections.add(Ih),Nu.Proj.projections.add(Lh),Nu.Proj.projections.add(Gh),Nu.Proj.projections.add(Dh),Nu.Proj.projections.add(Bh),Nu.Proj.projections.add(Uh),Nu.Proj.projections.add(Wh),Nu.Proj.projections.add(Xh),Nu.Proj.projections.add(Yh),Nu.Proj.projections.add(eu),Nu.Proj.projections.add(nu),Nu.Proj.projections.add(su),Nu.Proj.projections.add(ou),Nu.Proj.projections.add(au),Nu.Proj.projections.add(hu),Nu.Proj.projections.add(uu),Nu.Proj.projections.add(lu),Nu.Proj.projections.add(cu),Nu.Proj.projections.add(fu),Nu.Proj.projections.add(pu),Nu.Proj.projections.add(du),Nu.Proj.projections.add(yu),Nu.Proj.projections.add(gu),Nu.Proj.projections.add(vu),Nu.Proj.projections.add(Mu),Nu.Proj.projections.add(Su),Nu.Proj.projections.add(Pu),Nu.Proj.projections.add(Ru);const Iu=hh;async function Au(e){let i=(await async function(){let e;if("undefined"==typeof window){const i=jsdom.JSDOM;t.g.DOMParser=new i("<!doctype html><html><body></body></html>").window.DOMParser,t.g.Node=new i("").window.Node;let n=fs.readFileSync("cantons.json");e=JSON.parse(n)}else e=await async function(t){let e=await fetch("cantons.json");if(e.ok)return await e.json();throw new Error(e.status)}();return e}()).cantonsList;return Di.find(i,(t=>t.name===e))}async function ju(t){let e=[];if(void 0!==t.wmsMulti)for(let i=0;i<t.wmsMulti.length;i++){const n=t.wmsMulti[i];e.push(n)}else e.push({wmsUrl:t.wmsUrl,infoFormat:t.infoFormat,layers:t.layers});return e}async function Fu(t,e="1.3.0"){let i=Di.pluck(t.layers,"name");return new is({url:t.wmsUrl,params:{LAYERS:[...i],VERSION:e,TRANSPARENT:!1},serverType:"geoserver",crossOrigin:"anonymous"})}async function Tu(t,e,i){const n=.01;return t+"/query/?f=json&returnGeometry=false&spatialRel=esriSpatialRelIntersects&geometry="+`${(e-n).toFixed(3)},`+`${(i-n).toFixed(3)},`+`${(e+n).toFixed(3)},`+`${(i+n).toFixed(3)}&geometryType=esriGeometryEnvelope&inSR=2056&&outSR=2056`}async function Lu(t){const e=await Au(t),i=await ju(e);let n=[];for(const t of i){if("arcgis/json"===t.infoFormat)throw new Error("not implemented yet");{const e=await Fu(t);n.push(e)}}return n}Iu.defs("EPSG:2056","+proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +k_0=1 +x_0=2600000 +y_0=1200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs"),function(t){var e,i,n,r,s,o,a,h,u=Object.keys(t.defs),l=u.length;for(e=0;e<l;++e){var c=u[e];if(!hr(c)){var f=t.defs(c),p=f.units;p||"longlat"!==f.projName||(p=On.DEGREES),ar(new Rn({code:c,axisOrientation:f.axis,metersPerUnit:f.to_meter,units:p}))}}for(e=0;e<l;++e){var d=u[e],y=hr(d);for(i=0;i<l;++i){var g=u[i],v=hr(g);if(!tr(d,g))if(t.defs[d]===t.defs[g])lr([y,v]);else{var m=t(d,g);n=y,r=v,s=vr(y,v,m.forward),o=vr(v,y,m.inverse),a=void 0,h=void 0,a=hr(n),h=hr(r),$n(a,h,cr(s)),$n(h,a,cr(o))}}}}(Iu);const Gu={GetWMSCanton:Lu,GetWMSLegendCanton:async function(t){const e=await Lu(t);let i=[];for(const t of e){const e=t.getLegendUrl();i.push(e)}return i},CheckSuitabilityCanton:async function(t,e,i,n=!0){const r=[248e4,107e4],s=[284e4,13e5];if(t<r[0]||t>s[0]||e<r[1]||e>s[1])throw new Error("Not in the ESPG 2056 perimeter: "+r+"  "+s);n&&console.log("%c CheckSuitabilityCanton ","color:red; font-size:20px; font-weight: bold; -webkit-text-stroke: 1px black;");const o=await Au(i);if(!o)return n&&console.log("canton abbreviation not supported: "+i),5;const a=await ju(o);let h=0;for(const i of a){let r;if(r="arcgis/json"!==i.infoFormat?(await Fu(i)).getFeatureInfoUrl([t,e],.2,"EPSG:2056",{INFO_FORMAT:i.infoFormat}):await Tu(i.wmsUrl,t,e),n&&console.log(r),r)try{r="https://bfe-cors-anywhere.herokuapp.com/"+r,n&&console.log(r);const t=await fetch(r),e=await t.text();n&&console.log(e);for(let t of i.layers){let r;if(n&&console.log("\nlayer name: \t",t.name),"application/vnd.ogc.gml"===i.infoFormat){const i=new Zo({layers:t.name}).readFeatures(e);r=Di.first(Di.pluck(Di.pluck(i,"values_"),t.propertyName))}else{if("application/geojson"!==i.infoFormat&&"application/geo+json"!==i.infoFormat&&"application/json"!==i.infoFormat&&"arcgis/json"!==i.infoFormat)throw new Error("infoFormat not implemented: "+i.infoFormat);{let s;s="arcgis/json"!==i.infoFormat?"properties":t.nodeName,n&&console.log("node name: \t",s);let o=JSON.parse(e);r=Di.has(o,"features")&&o.features.length>0?o.features[0][s][t.propertyName]:void 0}}if(n&&console.log("property name: \t",t.propertyName),Di.has(t,"propertyValues")){void 0===r&&(r="undefined");let e=Di.some(t.propertyValues,(t=>t.contains)),i=Di.pluck(t.propertyValues,"name");if(e)if(Di.filter(i,(function(t){return r.includes(t)}))){let e=Di.find(t.propertyValues,(t=>r.includes(t.name)));n&&console.log("\t list match contains: \t",e.name),n&&console.log("\t summand:             \t",e.summand),h+=e.summand}else n&&console.log("\t NO match: \t",r);else if(Di.contains(i,r)){let e=Di.find(t.propertyValues,(t=>t.name===r));n&&console.log("\t list match exact: \t",e.name),n&&console.log("\t summand:          \t",e.summand),h+=e.summand}else n&&console.log("\t NO match: \t",r)}else r&&(n&&console.log("\t presence match: \t",r),n&&console.log("\t summand:        \t",t.summand),h+=t.summand)}n&&console.log("\n---------------------------------------------")}catch(t){n&&console.log("Error",t)}}if(o.harmonyMap){let t,e=Di.find(o.harmonyMap,(t=>t.sum===h));return t=e?e.value:0===h?4:void 0,n&&console.log("Mapping Sum:     \t",h),n&&console.log("Harmonised value:\t",t),t}throw n&&console.log("Mapping Sum:     \t",h),n&&console.log("Harmonised value:\t","no harmony map found"),new Error("no harmony found for canton "+o.name)}};window.BfeLib=Gu})();